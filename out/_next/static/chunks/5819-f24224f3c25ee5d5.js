"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5819],{5819:function(e,r,o){o.d(r,{Z:function(){return Y}});var i=o(85893),t=o(11163),n=o.n(t),l=o(67294),s=o(31727),a=o(49837),d=o(91359),c=o(79072),u=o(29630),m=o(87536),f=o(86501),p=o(45061),x=o(46749),v=o(89191),h=o(49540),g=o(40039),Z=o(29308),j=o(61953),b=o(75084),y=o(87462),S=o(63366),C=o(86010),D=o(94780),I=o(67074),q=o(78884),k=o(36622),w=o(1588),P=o(34867);function z(e){return(0,P.Z)("MuiIcon",e)}(0,w.Z)("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);let E=["baseClassName","className","color","component","fontSize"],N=e=>{let{color:r,fontSize:o,classes:i}=e,t={root:["root","inherit"!==r&&`color${(0,k.Z)(r)}`,`fontSize${(0,k.Z)(o)}`]};return(0,D.Z)(t,z,i)},R=(0,I.ZP)("span",{name:"MuiIcon",slot:"Root",overridesResolver(e,r){let{ownerState:o}=e;return[r.root,"inherit"!==o.color&&r[`color${(0,k.Z)(o.color)}`],r[`fontSize${(0,k.Z)(o.fontSize)}`]]}})(({theme:e,ownerState:r})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:({inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)})[r.fontSize],color:({primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0})[r.color]})),F=l.forwardRef(function(e,r){let o=(0,q.Z)({props:e,name:"MuiIcon"}),{baseClassName:t="material-icons",className:n,color:l="inherit",component:s="span",fontSize:a="medium"}=o,d=(0,S.Z)(o,E),c=(0,y.Z)({},o,{baseClassName:t,color:l,component:s,fontSize:a}),u=N(c);return(0,i.jsx)(R,(0,y.Z)({as:s,className:(0,C.Z)(t,"notranslate",u.root,n),ownerState:c,"aria-hidden":!0,ref:r},d))});F.muiName="Icon";let M=e=>{let{xs:r,md:o,label:t,onChange:n}=e,l=e=>{let r=e.target.files[0];n(r)};return(0,i.jsx)(c.ZP,{item:!0,xs:r,md:o,children:(0,i.jsxs)(j.Z,{display:"flex",flexDirection:"column",alignItems:"center",sx:{my:1},children:[(0,i.jsx)("input",{type:"file",accept:".jpg, .png, .pdf",onChange:l,style:{display:"none"},id:"fileInput"}),(0,i.jsx)("label",{htmlFor:"fileInput",children:(0,i.jsx)(b.Z,{variant:"contained",component:"span",sx:{textTransform:"none",fontWeight:"bold",fontSize:"1rem",padding:"14px"},startIcon:(0,i.jsx)(F,{icon:"material-symbols:add-circle-outline-rounded"}),children:t})})]})})},T=e=>{var r,o,t,j,b,y,S,C,D,I,q,k,w,P,z;let{paramFornecedorUnidadeID:E}=e,{user:N,setLoggedUnity:R,loggedUnity:F}=(0,l.useContext)(g.V),[T,Y]=(0,l.useState)(!1),[A,$]=(0,l.useState)(),O=E||n().query.id,_=n(),U=(0,x.Lo)(_.pathname),B="/configuracoes/unidade",{trigger:J,handleSubmit:L,setValue:V,reset:W,formState:{errors:K},register:G}=(0,m.cI)(),H=async e=>{if(9==e.length){let r=e.replace(/\D/g,"");s.h.get("https://viacep.com.br/ws/"+r+"/json/").then(e=>{console.log("busca cep",e.data),e.data.localidade?(V("fields.logradouro",e.data.logradouro),V("fields.bairro",e.data.bairro),V("fields.cidade",e.data.localidade),V("fields.uf",e.data.uf),f.ZP.success("Endere\xe7o encontrado!")):f.ZP.error("Endere\xe7o n\xe3o encontrado!")})}},Q=async e=>{let r={...e.fields,dataCadastro:(0,h.p6)(e.dataCadastro,"YYYY-MM-DD")};console.log("\uD83D\uDE80 ~ data:",r);try{"new"===U?(await s.h.post("".concat(B,"/novo"),r),f.ZP.success(x.OD.successNew),W(r)):"edit"===U&&(await s.h.put("".concat(B,"/").concat(O),r),f.ZP.success(x.OD.successUpdate),console.log(r))}catch(o){o.response&&409===o.response.status?f.ZP.error(x.OD.errorRepeated):console.log(o)}for(let i in F)i in r&&(F[i]=r[i]);localStorage.setItem("loggedUnity",JSON.stringify(F))},X=async()=>{try{await s.h.delete("".concat(B,"/").concat(O)),_.push(B),f.ZP.success(x.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(x.OD.pendingDelete),Y(!1)):console.log(e)}},ee=async()=>{try{let e=await s.h.get("".concat(B,"/").concat(O));W(e.data),$(e.data)}catch(r){console.log(r)}};return(0,l.useEffect)(()=>{ee(),setTimeout(()=>{J()},300)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Z,{children:(0,i.jsxs)("form",{onSubmit:L(Q),children:[(0,i.jsx)(v.Z,{btnCancel:1===N.papelID,btnSave:!0,handleSubmit:()=>L(Q),btnDelete:"edit"===U&&1===N.papelID,onclickDelete:()=>Y(!0)}),(0,i.jsx)(d.Z,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Nome Fantasia",name:"fields.nomeFantasia",required:!0,register:G,errors:null==K?void 0:null===(r=K.fields)||void 0===r?void 0:r.nomeFantasia}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Raz\xe3o Social",name:"fields.razaoSocial",required:!0,register:G,errors:null==K?void 0:null===(o=K.fields)||void 0===o?void 0:o.razaoSocial}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"CNPJ",name:"fields.cnpj",mask:"cnpj",required:!0,register:G,errors:null==K?void 0:null===(t=K.fields)||void 0===t?void 0:t.cnpj}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Respons\xe1vel",name:"fields.responsavel",required:!0,register:G,errors:null==K?void 0:null===(j=K.fields)||void 0===j?void 0:j.responsavel}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"E-mail",name:"fields.email",type:"email",required:!0,register:G,errors:null==K?void 0:null===(b=K.fields)||void 0===b?void 0:b.email}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Telefone 1",name:"fields.telefone1",mask:"telefone",required:!1,register:G,errors:null==K?void 0:null===(y=K.fields)||void 0===y?void 0:y.telefone1}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Telefone 2",name:"fields.telefone2",mask:"telefone",required:!1,register:G,errors:null==K?void 0:null===(S=K.fields)||void 0===S?void 0:S.telefone2}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"CEP",name:"fields.cep",getAddressByCep:H,mask:"cep",required:!1,register:G,errors:null==K?void 0:null===(C=K.fields)||void 0===C?void 0:C.cep}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Rua",name:"fields.logradouro",required:!1,register:G,errors:null==K?void 0:null===(D=K.fields)||void 0===D?void 0:D.logradouro}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"N\xfamero",name:"fields.numero",required:!1,register:G,errors:null==K?void 0:null===(I=K.fields)||void 0===I?void 0:I.numero}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Complemento",name:"fields.complemento",required:!1,register:G,errors:null==K?void 0:null===(q=K.fields)||void 0===q?void 0:q.complemento}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Bairro",name:"fields.bairro",required:!1,register:G,errors:null==K?void 0:null===(k=K.fields)||void 0===k?void 0:k.bairro}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Cidade",name:"fields.cidade",required:!1,register:G,errors:null==K?void 0:null===(w=K.fields)||void 0===w?void 0:w.cidade}),(0,i.jsx)(Z.Z,{xs:12,md:4,title:"UF",name:"fields.uf",mask:"estado",required:!1,register:G,errors:null==K?void 0:null===(P=K.fields)||void 0===P?void 0:P.uf})]})})]})}),(0,i.jsx)(a.Z,{sx:{mt:4},children:(0,i.jsx)(d.Z,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(Z.Z,{xs:12,md:4,title:"Titulo do relat\xf3rio",name:"titleReport",required:!1,register:G,errors:null==K?void 0:null===(z=K.fields)||void 0===z?void 0:z.titleReport}),(0,i.jsx)(M,{label:"Nenhum arquivo selecionado"})]})})}),"edit"===U&&A&&(0,i.jsxs)(u.Z,{variant:"caption",sx:{display:"flex",justifyContent:"end",p:4},children:["Data de cadastro:",(0,h.p6)(A.fields.dataCadastro,"DD/MM/YYYY")]}),(0,i.jsx)(p.Z,{title:"Excluir dado",text:"Tem certeza que deseja excluir?",openModal:T,handleClose:()=>Y(!1),handleSubmit:X,btnCancel:!0,btnConfirm:!0})]})};var Y=T},45061:function(e,r,o){var i=o(85893),t=o(75084),n=o(29620),l=o(77745),s=o(95398),a=o(76779),d=o(44642);o(21609);var c=o(19604),u=o(29630),m=o(55343),f=o(67836),p=o(67294),x=o(82747);o(84220),o(29308),o(67569),o(3893),o(88475);let v=e=>{let{title:r,text:o,handleClose:v,openModal:h,handleSubmit:g,cnpj:Z,gruposAnexo:j,inputEmail:b,btnCancel:y,btnConfirm:S,grupoAnexosFornecedor:C,btnCancelColor:D,btnConfirmColor:I,closeAfterSave:q,listErrors:k}=e,[w,P]=(0,p.useState)(null),[z,E]=(0,p.useState)(!1);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(n.Z,{open:h,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,r){"backdropClick"!==r&&v()},children:[(0,i.jsx)(l.Z,{id:"form-dialog-title",children:r}),(0,i.jsxs)(s.Z,{children:[(0,i.jsxs)(d.Z,{sx:{mb:3},children:[o,k&&k.status&&(0,i.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,i.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:k.errors.map((e,r)=>(0,i.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},r))})]})]}),b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Z,{sx:{mt:2},fullWidth:!0,children:[(0,i.jsx)(f.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==w?void 0:w.length)>0&&z,inputProps:{onChange(e){P(e.target.value),E(!(0,x.dI)(e.target.value))}}}),(null==w?void 0:w.length)>0&&z&&(0,i.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,i.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,i.jsxs)(a.Z,{className:"dialog-actions-dense",children:[y&&(0,i.jsx)(t.Z,{variant:"outlined",color:"primary",onClick:v,children:"Cancelar"}),S&&(0,i.jsx)(t.Z,{variant:"contained",disabled:b&&(null==w?void 0:w.length)>0&&z||k&&k.status,color:I||"error",onClick:b&&Z?()=>{g(Z,j,w),P(null),q&&v()}:b&&!Z?()=>{g(w),P(null),q&&v()}:()=>{g(),q&&v()},children:"Confirmar"})]})]})})};r.Z=v},82747:function(e,r,o){function i(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let r=e.length-2,o=e.substring(0,r),i=e.substring(r),t=0,n=r-7;for(let l=r;l>=1;l--)t+=o.charAt(r-l)*n--,n<2&&(n=9);let s=t%11<2?0:11-t%11;if(s!=i.charAt(0))return!1;r+=1,o=e.substring(0,r),t=0,n=r-7;for(let a=r;a>=1;a--)t+=o.charAt(r-a)*n--,n<2&&(n=9);return(s=t%11<2?0:11-t%11)==i.charAt(1)}function t(e){let r;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let o=0;for(let i=1;i<=9;i++)o+=parseInt(e.substring(i-1,i))*(11-i);if((10==(r=10*o%11)||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;o=0;for(let t=1;t<=10;t++)o+=parseInt(e.substring(t-1,t))*(12-t);return(10==(r=10*o%11)||11===r)&&(r=0),r===parseInt(e.substring(10,11))}function n(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.d(r,{dI:function(){return n},sw:function(){return t},zk:function(){return i}})}}]);