"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8773],{88773:function(e,r,t){var i=t(85893),n=t(11163),l=t.n(n),a=t(67294),o=t(60664),s=t(49837),d=t(91359),c=t(79072),u=t(29630),m=t(87536),p=t(86501),f=t(45061),x=t(46749),v=t(89191),g=t(49540),h=t(40039),j=t(29308);let b=e=>{var r,t,n,b,Z,y,C,$,k,w,D,I,S,z;let{paramFornecedorUnidadeID:E}=e,{user:P,setLoggedUnity:q,loggedUnity:L}=(0,a.useContext)(h.V),[F,N]=(0,a.useState)(!1),[T,Y]=(0,a.useState)(),M=E||l().query.id,R=l(),V=(0,x.Lo)(R.pathname),A="/configuracoes/unidade",{trigger:O,handleSubmit:B,setValue:_,reset:U,formState:{errors:K},register:H}=(0,m.cI)(),J=async e=>{if(9==e.length){let r=e.replace(/\D/g,"");o.h.get("https://viacep.com.br/ws/"+r+"/json/").then(e=>{console.log("busca cep",e.data),e.data.localidade?(_("fields.logradouro",e.data.logradouro),_("fields.bairro",e.data.bairro),_("fields.cidade",e.data.localidade),_("fields.uf",e.data.uf),p.ZP.success("Endere\xe7o encontrado!")):p.ZP.error("Endere\xe7o n\xe3o encontrado!")})}},W=async e=>{let r={...e.fields,dataCadastro:(0,g.p6)(e.dataCadastro,"YYYY-MM-DD")};console.log("\uD83D\uDE80 ~ data:",r);try{"new"===V?(await o.h.post("".concat(A,"/novo"),r),p.ZP.success(x.OD.successNew),U(r)):"edit"===V&&(await o.h.put("".concat(A,"/").concat(M),r),p.ZP.success(x.OD.successUpdate),console.log(r))}catch(t){t.response&&409===t.response.status?p.ZP.error(x.OD.errorRepeated):console.log(t)}for(let i in L)i in r&&(L[i]=r[i]);localStorage.setItem("loggedUnity",JSON.stringify(L))},G=async()=>{try{await o.h.delete("".concat(A,"/").concat(M)),R.push(A),p.ZP.success(x.OD.successDelete)}catch(e){e.response&&409===e.response.status?(p.ZP.error(x.OD.pendingDelete),N(!1)):console.log(e)}},Q=async()=>{try{let e=await o.h.get("".concat(A,"/").concat(M));U(e.data),Y(e.data)}catch(r){console.log(r)}};return(0,a.useEffect)(()=>{Q(),setTimeout(()=>{O()},300)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{children:(0,i.jsxs)("form",{onSubmit:B(W),children:[(0,i.jsx)(v.Z,{btnCancel:1===P.papelID,btnSave:!0,handleSubmit:()=>B(W),btnDelete:"edit"===V&&1===P.papelID,onclickDelete:()=>N(!0)}),(0,i.jsx)(d.Z,{children:(0,i.jsxs)(c.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(j.Z,{xs:12,md:4,title:"Nome Fantasia",name:"fields.nomeFantasia",required:!0,register:H,errors:null==K?void 0:null===(r=K.fields)||void 0===r?void 0:r.nomeFantasia}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Raz\xe3o Social",name:"fields.razaoSocial",required:!0,register:H,errors:null==K?void 0:null===(t=K.fields)||void 0===t?void 0:t.razaoSocial}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"CNPJ",name:"fields.cnpj",mask:"cnpj",required:!0,register:H,errors:null==K?void 0:null===(n=K.fields)||void 0===n?void 0:n.cnpj}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Respons\xe1vel",name:"fields.responsavel",required:!0,register:H,errors:null==K?void 0:null===(b=K.fields)||void 0===b?void 0:b.responsavel}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"E-mail",name:"fields.email",type:"email",required:!0,register:H,errors:null==K?void 0:null===(Z=K.fields)||void 0===Z?void 0:Z.email}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Telefone 1",name:"fields.telefone1",mask:"telefone",required:!1,register:H,errors:null==K?void 0:null===(y=K.fields)||void 0===y?void 0:y.telefone1}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Telefone 2",name:"fields.telefone2",mask:"telefone",required:!1,register:H,errors:null==K?void 0:null===(C=K.fields)||void 0===C?void 0:C.telefone2}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"CEP",name:"fields.cep",getAddressByCep:J,mask:"cep",required:!1,register:H,errors:null==K?void 0:null===($=K.fields)||void 0===$?void 0:$.cep}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Rua",name:"fields.logradouro",required:!1,register:H,errors:null==K?void 0:null===(k=K.fields)||void 0===k?void 0:k.logradouro}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"N\xfamero",name:"fields.numero",required:!1,register:H,errors:null==K?void 0:null===(w=K.fields)||void 0===w?void 0:w.numero}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Complemento",name:"fields.complemento",required:!1,register:H,errors:null==K?void 0:null===(D=K.fields)||void 0===D?void 0:D.complemento}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Bairro",name:"fields.bairro",required:!1,register:H,errors:null==K?void 0:null===(I=K.fields)||void 0===I?void 0:I.bairro}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"Cidade",name:"fields.cidade",required:!1,register:H,errors:null==K?void 0:null===(S=K.fields)||void 0===S?void 0:S.cidade}),(0,i.jsx)(j.Z,{xs:12,md:4,title:"UF",name:"fields.uf",mask:"estado",required:!1,register:H,errors:null==K?void 0:null===(z=K.fields)||void 0===z?void 0:z.uf})]})})]})}),"edit"===V&&T&&(0,i.jsxs)(u.Z,{variant:"caption",sx:{display:"flex",justifyContent:"end",p:4},children:["Data de cadastro:",(0,g.p6)(T.fields.dataCadastro,"DD/MM/YYYY")]}),(0,i.jsx)(f.Z,{title:"Excluir dado",text:"Tem certeza que deseja excluir?",openModal:F,handleClose:()=>N(!1),handleSubmit:G,btnCancel:!0,btnConfirm:!0})]})};r.Z=b},45061:function(e,r,t){var i=t(85893),n=t(75084),l=t(29620),a=t(77745),o=t(95398),s=t(76779),d=t(44642);t(21609);var c=t(19604),u=t(29630),m=t(55343),p=t(67836),f=t(67294),x=t(82747);let v=e=>{let{title:r,text:t,handleClose:v,openModal:g,handleSubmit:h,cnpj:j,inputEmail:b,btnCancel:Z,btnConfirm:y,btnCancelColor:C,btnConfirmColor:$,closeAfterSave:k,listErrors:w}=e,[D,I]=(0,f.useState)(null),[S,z]=(0,f.useState)(!1);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(l.Z,{open:g,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,r){"backdropClick"!==r&&v()},children:[(0,i.jsx)(a.Z,{id:"form-dialog-title",children:r}),(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(d.Z,{sx:{mb:3},children:[t,w&&w.status&&(0,i.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,i.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:w.errors.map((e,r)=>(0,i.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},r))})]})]}),b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.Z,{sx:{mt:2},fullWidth:!0,children:[(0,i.jsx)(p.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==D?void 0:D.length)>0&&S,inputProps:{onChange(e){I(e.target.value),z(!(0,x.dI)(e.target.value))}}}),(null==D?void 0:D.length)>0&&S&&(0,i.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,i.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,i.jsxs)(s.Z,{className:"dialog-actions-dense",children:[Z&&(0,i.jsx)(n.Z,{variant:"outlined",color:"primary",onClick:v,children:"Cancelar"}),y&&(0,i.jsx)(n.Z,{variant:"contained",disabled:b&&(null==D?void 0:D.length)>0&&S||w&&w.status,color:$||"error",onClick:b&&j?()=>{h(j,D),I(null),k&&v()}:b&&!j?()=>{h(D),I(null),k&&v()}:()=>{h(),k&&v()},children:"Confirmar"})]})]})})};r.Z=v},89191:function(e,r,t){t.d(r,{Z:function(){return y}});var i=t(85893),n=t(11163),l=t.n(n),a=t(67294),o=t(91359),s=t(61953),d=t(75084),c=t(72389),u=t(41664),m=t.n(u),p=t(21609),f=t(46749),x=t(73812),v=t(86378),g=t(9942);function h(e){let{disabled:r,dataReports:t,open:n,anchorEl:l,handleClick:a,handleClose:o,generateReport:s}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:l,open:n,onClose:o,TransitionComponent:g.Z,children:t.map(e=>(0,i.jsxs)(v.Z,{onClick(){o(),s(e)},children:[(0,i.jsx)("span",{children:e.identification}),(0,i.jsx)("span",{style:{padding:"0 5px"},children:"-"}),(0,i.jsx)("span",{children:e.name})]},e.id))})})}t(60565);var j=t(40039),b=t(10160);let Z=e=>{let{btnCancel:r,btnSave:t,btnSend:n,btnStatus:u,handleSubmit:x,disabledSubmit:v,handleSend:g,disabledSend:Z,handleBtnStatus:y,btnDelete:C,onclickDelete:$,btnPrint:k,disabledPrint:w,disabled:D,dataReports:I,generateReport:S}=e,z=l(),{user:E,routes:P}=(0,a.useContext)(j.V),[q,L]=(0,a.useState)(!1),[F,N]=(0,a.useState)(null),T=Boolean(F),Y=e=>{N(e.currentTarget)},M=()=>{N(null)},R=(()=>{let e=z.pathname.split("/").slice(0,-1).join("/");return e||z.pathname})(),V=()=>{window.scrollTo({top:0,behavior:"smooth"})},A=()=>{window.history.back()};return(0,a.useEffect)(()=>{let e=()=>{L(!1),window.scrollY>0?L(!0):L(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsxs)(s.Z,{sx:{display:"flex",gap:"8px"},children:[r&&(0,i.jsx)(m(),{href:(0,f.g_)(z.pathname),children:(0,i.jsx)(d.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,i.jsx)(p.Z,{icon:"material-symbols:arrow-back-rounded"})})}),C&&P.find(e=>e.rota===R&&e.excluir)&&(0,i.jsx)(d.Z,{type:"button",onClick:$,variant:"outlined",color:"error",size:"medium",startIcon:(0,i.jsx)(p.Z,{icon:"material-symbols:delete-outline"}),children:"Excluir"}),u&&(0,i.jsx)(d.Z,{type:"button",onClick:y,variant:"outlined",color:"primary",size:"medium",startIcon:(0,i.jsx)(p.Z,{icon:"fluent:status-12-filled"}),children:"Status"})]}),(0,i.jsxs)(s.Z,{sx:{display:"flex",gap:"8px"},children:[k&&1===I.length&&(0,i.jsx)(d.Z,{id:"fade-button","aria-controls":T?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":T?"true":void 0,onClick:()=>S(I[0]),color:"primary",disabled:D||w,variant:"outlined",size:"medium",type:"button",startIcon:(0,i.jsx)(p.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),k&&I.length>1&&(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(d.Z,{id:"fade-button","aria-controls":T?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":T?"true":void 0,onClick:Y,color:"primary",disabled:D||w,variant:"outlined",size:"medium",type:"button",sx:{mr:0},startIcon:(0,i.jsx)(p.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),(0,i.jsx)(h,{generateReport:S,dataReports:I,handleClick:Y,handleClose:M,open:T,anchorEl:F})]}),t&&P.find(e=>e.rota===R&&e.editar)&&(0,i.jsx)(d.Z,{onClick:x,type:"submit",variant:"outlined",size:"medium",color:"primary",disabled:D||v,startIcon:(0,i.jsx)(p.Z,{icon:"material-symbols:save"}),children:"Salvar"}),n&&(0,i.jsx)(d.Z,{onClick:g,type:"button",variant:"contained",size:"medium",color:"primary",disabled:D||Z,startIcon:(0,i.jsx)(p.Z,{icon:"carbon:send-filled"}),children:"Concluir Formul\xe1rio"}),(0,i.jsx)("div",{className:"\n                        ".concat(q?"fadeIn":"hidden"," trasition duration-200 fixed bottom-10 right-8 z-50 flex flex-col-reverse gap-3\n                    "),children:[{id:1,title:"Salvar",color:"primary",size:"large",type:"submit",variant:"contained",disabled:D||v,icon:"material-symbols:save",function:x},{id:2,title:"Imprimir",color:"default",size:"large",type:"button",variant:"outlined",disabled:D||w,icon:"material-symbols:print",function:Y},{id:3,title:"Voltar ao topo",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"ion:arrow-up",function:V},{id:4,title:"Voltar para a p\xe1gina anterior",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"material-symbols:arrow-back-rounded",function:A}].map(e=>(1!==e.id||t&&P.find(e=>e.rota===R&&e.editar))&&(2!==e.id||k)?(0,i.jsx)(c.Z,{title:e.title,placement:"left",children:(0,i.jsx)("div",{children:(0,i.jsx)(b.Z,{color:e.color,size:"large",onClick:e.function,variant:"contained",type:e.type,disabled:e.disabled,children:(0,i.jsx)(p.Z,{icon:e.icon})})},e.id)},e.id):null)})]})]})})};var y=Z},29308:function(e,r,t){var i=t(85893),n=t(67294),l=t(79072),a=t(55343),o=t(67836),s=t(34175);let d=e=>{let{xs:r,md:t,title:d,name:c,rows:u,value:m,type:p,mask:f,getAddressByCep:x,multiline:v,disabled:g,required:h,register:j,errors:b}=e,Z=(0,n.useRef)(null);return(0,i.jsx)(l.ZP,{item:!0,xs:r,md:t,sx:{my:1},children:(0,i.jsx)(a.Z,{fullWidth:!0,children:(0,i.jsx)(o.Z,{multiline:v,defaultValue:null!=m?m:"",label:d,rows:u,type:null!=p?p:"text",placeholder:d,name:c,disabled:g,"aria-describedby":"validation-schema-nome",error:b,...j(c,{required:h}),inputRef:Z,onChange(e){"cnpj"===f?e.target.value=(0,s.PK)(e.target.value):"cep"===f?(e.target.value=(0,s.Tc)(e.target.value),x(e.target.value)):"telefone"===f?e.target.value=(0,s.Bk)(e.target.value):"estado"===f?e.target.value=(0,s.CL)(e.target.value):"cpf"===f?e.target.value=(0,s.VL)(e.target.value):"rg"===f?e.target.value=(0,s.cH)(e.target.value):e.target.value=e.target.value},inputProps:"cnpj"===f?{maxLength:18,type:"tel",inputMode:"numeric"}:"cep"===f?{maxLength:9,type:"tel",inputMode:"numeric"}:"telefone"===f?{maxLength:14}:"cpf"===f?{maxLength:14}:"rg"===f?{maxLength:11}:"estado"===f?{maxLength:2}:{}})})})};r.Z=d},34175:function(e,r,t){function i(e){return e&&(e=(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/^(\d{2})(\d)/,"$1.$2")).replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1/$2")).replace(/(\d{4})(\d)/,"$1-$2")),e}function n(e){return e&&(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2")),e}function l(e){return e&&(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/(\d{2})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1-$2")),e}function a(e){return e=(e=(e=(e=e.replace(/\D/g,"")).replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d)(\d{4})$/,"$1-$2")).replace(/\)-/,")")}function o(e){return e=(e=e.replace(/\D/g,"")).replace(/^(\d{5})(\d)/,"$1-$2")}function s(e){return e=(e=e.toUpperCase()).replace(/[^A-Z]/g,"")}t.d(r,{Bk:function(){return a},CL:function(){return s},PK:function(){return i},Tc:function(){return o},VL:function(){return n},cH:function(){return l}})},82747:function(e,r,t){function i(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let r=e.length-2,t=e.substring(0,r),i=e.substring(r),n=0,l=r-7;for(let a=r;a>=1;a--)n+=t.charAt(r-a)*l--,l<2&&(l=9);let o=n%11<2?0:11-n%11;if(o!=i.charAt(0))return!1;r+=1,t=e.substring(0,r),n=0,l=r-7;for(let s=r;s>=1;s--)n+=t.charAt(r-s)*l--,l<2&&(l=9);return(o=n%11<2?0:11-n%11)==i.charAt(1)}function n(e){let r;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let t=0;for(let i=1;i<=9;i++)t+=parseInt(e.substring(i-1,i))*(11-i);if((10==(r=10*t%11)||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;t=0;for(let n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n))*(12-n);return(10==(r=10*t%11)||11===r)&&(r=0),r===parseInt(e.substring(10,11))}function l(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}t.d(r,{dI:function(){return l},sw:function(){return n},zk:function(){return i}})}}]);