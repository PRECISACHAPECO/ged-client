"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6896],{11935:function(e,a,l){l.d(a,{Z:function(){return D}});var o=l(85893),t=l(75084),n=l(29620),s=l(77745),i=l(95398),r=l(76779),d=l(44642),c=l(40039);l(21609);var u=l(19604),x=l(29630),m=l(67294),p=l(79072),v=l(55343),h=l(61953),j=l(41470),b=l(22841),Z=l(15497),f=l(75158),g=l(67836);let C=e=>{let{title:a,name:l,value:t,papelID:n,setResult:s,options:i}=e;return(0,o.jsxs)(p.ZP,{container:!0,spacing:2,sx:{mt:4},children:[n&&1==n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.ZP,{item:!0,xs:12,md:12,children:(0,o.jsxs)(v.Z,{fullWidth:!0,children:[(0,o.jsx)(x.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:a}),(0,o.jsx)(h.Z,{display:"flex",gap:8,children:(0,o.jsx)(j.Z,{row:!0,"aria-label":"colored",name:"colored",value:t.status,onChange(e,a){s({...t,status:a})},children:i&&i.map((e,a)=>(0,o.jsx)(b.Z,{value:e.value,name:l,control:(0,o.jsx)(Z.Z,{color:e.color}),label:e.label}))})})]})}),t.status&&(50==t.status||60==t.status)&&(0,o.jsx)(p.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(b.Z,{label:"Gerar n\xe3o conformidade",control:(0,o.jsx)(f.Z,{name:"naoConformidade",value:null==t?void 0:t.naoConformidade,checked:50==t.status,onChange(e){s({...t,naoConformidade:e.target.checked})}})})})]}),(0,o.jsx)(p.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(v.Z,{fullWidth:!0,children:(0,o.jsx)(g.Z,{label:"Observa\xe7\xe3o de conclus\xe3o (opcional)",placeholder:"Observa\xe7\xe3o de conclus\xe3o (opcional)",defaultValue:t.obsConclusao,multiline:!0,rows:4,onChange(e,a){s({...t,obsConclusao:e.target.value})}})})})]})},y=e=>{let{title:a,text:l,handleClose:p,openModal:v,conclusionForm:h,info:j,btnCancel:b,btnConfirm:Z,listErrors:f}=e,{user:g,loggedUnity:y}=(0,m.useContext)(c.V),[D,I]=(0,m.useState)({});return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(n.Z,{open:v,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,a){"backdropClick"!==a&&p()},children:[(0,o.jsx)(s.Z,{id:"form-dialog-title",children:a}),(0,o.jsx)(i.Z,{children:(0,o.jsxs)(d.Z,{sx:{mb:3},children:[l,f&&f.status&&(0,o.jsxs)(u.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,o.jsx)(x.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:f.errors.map((e,a)=>(0,o.jsxs)(x.Z,{variant:"body2",color:"error",children:["- ",e]},a))})]}),f&&!f.status&&(0,o.jsx)(u.Z,{severity:"warning",sx:{mt:2},children:"Ap\xf3s concluir o formul\xe1rio, o mesmo n\xe3o poder\xe1 mais ser alterado!"}),(0,o.jsx)(C,{title:1==g.papelID?"Resultado do Processo":"Observa\xe7\xe3o",name:"status",value:D,setResult:I,papelID:g.papelID,options:[{value:70,color:"success",label:"Aprovado"},{value:60,color:"warning",label:"Aprovado Parcial"},{value:50,color:"error",label:"Reprovado"}]})]})}),(0,o.jsxs)(r.Z,{className:"dialog-actions-dense",children:[b&&(0,o.jsx)(t.Z,{variant:"outlined",color:"primary",onClick:p,children:"Fechar"}),Z&&(0,o.jsx)(t.Z,{variant:"contained",disabled:f&&f.status||1==g.papelID&&!D.status,color:"primary",onClick(){p(),h(D)},children:"Concluir Formul\xe1rio"})]})]})})};var D=y},34282:function(e,a,l){var o=l(85893),t=l(67294),n=l(75084),s=l(29620),i=l(77745),r=l(95398),d=l(76779),c=l(44642),u=l(21609),x=l(60664),m=l(61953),p=l(55343),v=l(35966),h=l(67836),j=l(19604),b=l(46749),Z=l(40039),f=l(7071),g=l(67074),C=l(17494),y=l(87413),D=l(29630),I=l(72162),P=l(9601),S=l(51221),W=l(36599),k=l(45061);let w=(0,g.ZP)(W.Z)({paddingLeft:0,paddingRight:0,"& .MuiTimelineItem-root":{width:"100%","&:before":{display:"none"}}}),V=e=>{var a;let{id:l,parFormularioID:g,formStatus:W,hasFormPending:V,title:A,text:F,handleClose:R,openModal:E,handleSubmit:O,btnCancel:N,btnConfirm:_,canChangeStatus:z,btnConfirmColor:M}=e,[H,L]=(0,t.useState)(!1),{user:T,loggedUnity:q}=(0,t.useContext)(Z.V),[G,K]=(0,t.useState)(null),[B,J]=(0,t.useState)(!1);console.log("selectedStatus: ",G);let Q=async()=>{try{await x.h.post("/formularios/fornecedor/getMovementHistory/".concat(l),{parFormularioID:g}).then(e=>{console.log("\uD83D\uDE80 ~ response:",e.data),L(e.data)})}catch(e){console.log(e)}},U=[];for(let X in b.WR)30==parseInt(X)&&parseInt(X)!=W&&U.push({id:parseInt(X),nome:b.WR[X].title});return(0,t.useEffect)(()=>{console.log("entrou no useeffect..."),Q()},[B]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.Z,{open:E,onClose:R,"aria-labelledby":"form-dialog-title",children:[(0,o.jsx)(i.Z,{id:"form-dialog-title",children:A}),(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(c.Z,{sx:{mb:3},children:F}),z&&(0,o.jsx)(m.Z,{children:(0,o.jsx)(p.Z,{fullWidth:!0,children:(0,o.jsx)(v.Z,{options:U,defaultValue:U.find(e=>e.id===G),id:"autocomplete-outlined",getOptionLabel:e=>e.nome,onChange(e,a){K(null==a?void 0:a.id)},renderInput:e=>(0,o.jsx)(h.Z,{...e,name:"formulario.status",label:"Alterar Status do Formul\xe1rio",placeholder:"Alterar Status do Formul\xe1rio"})})})}),T&&1==T.papelID&&V&&(0,o.jsx)(j.Z,{severity:"warning",sx:{mb:4},children:"O Status n\xe3o pode mais ser alterado pois j\xe1 est\xe1 sendo utilizado em outro formul\xe1rio!"}),(0,o.jsx)(m.Z,{children:(0,o.jsx)(w,{children:H&&H.length>0&&H.map((e,a)=>(0,o.jsxs)(y.Z,{children:[(0,o.jsxs)(P.Z,{children:[(0,o.jsx)(C.Z,{color:b.WR[e.statusAtual].color}),(0,o.jsx)(S.Z,{})]}),(0,o.jsxs)(I.Z,{sx:{"& svg":{verticalAlign:"bottom",mx:4}},children:[(0,o.jsxs)(m.Z,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsxs)(D.Z,{variant:"body2",sx:{mr:2,fontWeight:600,color:"text.primary"},children:[e.data+" - "+e.hora+" ",0==a&&(0,o.jsx)(f.Z,{size:"small",skin:"light",color:b.WR[e.statusAtual].color,label:"Atual",sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,o.jsx)(D.Z,{variant:"caption",children:e.usuario})]}),(0,o.jsxs)(m.Z,{sx:{mb:2,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,o.jsxs)(D.Z,{variant:"body2",sx:{color:"text.primary"},children:[(0,o.jsx)("span",{children:b.WR[e.statusAnterior].title}),(0,o.jsx)(u.Z,{icon:"mdi:arrow-right",fontSize:20,style:{display:"inline-block"}}),(0,o.jsx)("span",{children:b.WR[e.statusAtual].title})]}),(0,o.jsx)(D.Z,{variant:"caption",children:e.unidade})]})]})]}))})})]}),(0,o.jsxs)(d.Z,{className:"dialog-actions-dense",children:[N&&(0,o.jsx)(n.Z,{variant:"outlined",color:"primary",onClick:R,children:"Fechar"}),_&&T&&1==T.papelID&&!V&&z&&(0,o.jsx)(n.Z,{variant:"contained",color:"primary",onClick:()=>1==g?J(!0):O(G),disabled:!G,children:"Confirmar"})]})]}),(0,o.jsx)(k.Z,{openModal:B,handleClose:()=>J(!1),title:"Confirmar Altera\xe7\xe3o",text:'Deseja realmente alterar o status do formul\xe1rio para "'.concat(null===(a=b.WR[G])||void 0===a?void 0:a.title,'" ? O mesmo ficar\xe1 dispon\xedvel para a edi\xe7\xe3o do Fornecedor novamente.'),btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",handleSubmit(){O(G),J(!1),K(null)}})]})};a.Z=V},79139:function(e,a,l){l.d(a,{Z:function(){return h}});var o=l(85893),t=l(49837),n=l(91359),s=l(79072),i=l(29630),r=l(67294),d=l(55343),c=l(46749),u=l(29308),x=l(84220),m=l(50287);let p=e=>{var a,l,t,n,i,p,v,h,j;let{blockIndex:b,index:Z,values:f,register:g,errors:C,setValue:y,disabled:D}=e;console.log("\uD83D\uDE80 ~ values:",f);let[I,P]=(0,r.useState)({}),S=(e,a,l,o)=>{console.log("\uD83D\uDE80 ~ type, name, value, numDays:",e,a,l,o);let t=new Date(l),n=(0,c.HD)(e,t,o);console.log("status",n),P(e=>({...e,[a]:n}))};return(0,r.useEffect)(()=>{"Data"===f.alternativa&&S("dataPassado",null,f.resposta,365)},[]),(0,o.jsxs)(s.ZP,{index:Z,container:!0,spacing:4,sx:{mb:4},children:[(0,o.jsx)("input",{type:"hidden",name:"blocos[".concat(b,"].itens[").concat(Z,"].itemID"),defaultValue:f.itemID,...g("blocos[".concat(b,"].itens[").concat(Z,"].itemID"))}),(0,o.jsx)(s.ZP,{item:!0,xs:12,md:6,children:f.ordem+" - "+f.nome}),(0,o.jsxs)(s.ZP,{item:!0,xs:12,md:3,children:[(0,o.jsx)("input",{type:"hidden",name:"blocos[".concat(b,"].itens[").concat(Z,"].tipoAlternativa"),defaultValue:f.alternativa,...g("blocos[".concat(b,"].itens[").concat(Z,"].tipoAlternativa"))}),(0,o.jsxs)(d.Z,{fullWidth:!0,children:[f&&f.alternativas&&f.alternativas.length>1&&(0,o.jsx)(x.Z,{title:"Selecione uma resposta",options:f.alternativas,name:"blocos[".concat(b,"].itens[").concat(Z,"].resposta"),idName:"alternativaID",value:f.resposta,disabled:D,register:g,setValue:y,errors:null===(t=null==C?void 0:null===(a=C.blocos)||void 0===a?void 0:null===(l=a[b])||void 0===l?void 0:l.itens[Z])||void 0===t?void 0:t.resposta}),0==f.alternativas.length&&"Data"==f.alternativa&&(0,o.jsx)(m.Z,{title:"Data da avalia\xe7\xe3o",disabled:D,value:f.resposta,type:null,name:"blocos[".concat(b,"].itens[").concat(Z,"].resposta"),errors:null===(p=null==C?void 0:null===(n=C.blocos)||void 0===n?void 0:null===(i=n[b])||void 0===i?void 0:i.itens[Z])||void 0===p?void 0:p.resposta,setDateFormat:S,typeValidation:"dataPassado",daysValidation:365,dateStatus:I,register:g}),0==f.alternativas.length&&"Dissertativa"==f.alternativa&&(0,o.jsx)(u.Z,{title:"Descreva a resposta",name:"blocos[".concat(b,"].itens[").concat(Z,"].resposta"),value:f.resposta,multiline:!0,disabled:D,register:g,errors:null===(j=null==C?void 0:null===(v=C.blocos)||void 0===v?void 0:null===(h=v[b])||void 0===h?void 0:h.itens[Z])||void 0===j?void 0:j.resposta})]})]}),f&&1==f.obs&&(0,o.jsx)(s.ZP,{item:!0,xs:12,md:3,children:(0,o.jsx)(d.Z,{fullWidth:!0,children:(0,o.jsx)(u.Z,{title:"Observa\xe7\xe3o",name:"blocos[".concat(b,"].itens[").concat(Z,"].observacao"),value:f.observacao,multiline:!0,disabled:D,register:g})})})]})},v=e=>{let{index:a,values:l,blockKey:r,register:d,setValue:c,errors:u,disabled:x}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(t.Z,{sx:{mt:4},children:(0,o.jsx)(n.Z,{children:(0,o.jsxs)(s.ZP,{container:!0,children:[(0,o.jsx)("input",{type:"hidden",name:"blocos[".concat(a,"].").concat(r),defaultValue:l[r],...d("blocos[".concat(a,"].").concat(r))}),(0,o.jsx)(s.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(i.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700,mb:6},children:l.nome})}),l.itens&&l.itens.map((e,l)=>(0,o.jsx)(p,{blockIndex:a,index:l,values:e,register:d,setValue:c,errors:u,disabled:x},l))]})})},a)})};var h=v},56531:function(e,a,l){var o=l(85893),t=l(79072),n=l(67294),s=l(46749),i=l(40039),r=l(11163),d=l.n(r),c=l(29308),u=l(84220),x=l(50287);let m=e=>{let{register:a,errors:l,setValue:r,fields:m,values:p,disabled:v,setCopiedDataContext:h}=e,[j,b]=(0,n.useState)({}),[Z,f]=(0,n.useState)(null),{loggedUnity:g,user:C}=(0,n.useContext)(i.V),y=d(),D=(0,s.g_)(y.pathname),I=()=>{var e;null==m||m.map((e,a)=>{if("int"==e.tipo)r("header.".concat(e.tabela),(null==p?void 0:p[e.tabela])?null==p?void 0:p[e.tabela]:null);else if("date"==e.tipo)P("dataPassado",e.nomeColuna,p[e.nomeColuna],365);else{if("/formularios/fornecedor"==D&&2==C.papelID){let l=(null==p?void 0:p[e.nomeColuna])===null&&(null==g?void 0:g[e.nomeColuna])?(h(!0),null==g?void 0:g[e.nomeColuna]):null==p?void 0:p[e.nomeColuna];r("header.".concat(e.nomeColuna),l)}else r("header.".concat(e.nomeColuna),null==p?void 0:p[e.nomeColuna]);console.log("nome da coluna",e.nomeColuna),console.log("valor do campo",null==p?void 0:p[e.nomeColuna])}}),f((null==p?void 0:p.registroestabelecimento)?null==p?void 0:null===(e=p.registroestabelecimento)||void 0===e?void 0:e.id:null)},P=(e,a,l,o)=>{let t=new Date(l),n=(0,s.HD)(e,t,o);console.log("status",n),b(e=>({...e,[a]:n}))};return(0,n.useEffect)(()=>{I()},[]),(0,o.jsx)(t.ZP,{container:!0,spacing:4,children:m&&m.map((e,t)=>{var n,s,i;return(0,o.jsxs)(o.Fragment,{children:[e&&"int"===e.tipo&&e.tabela&&(0,o.jsx)(u.Z,{xs:12,md:3,title:e.nomeCampo,name:"header.".concat(e.tabela),options:e.options,value:null==p?void 0:p[e.tabela],mask:e.tabela,disabled:v,register:a,setValue:r,errors:null==l?void 0:null===(n=l.header)||void 0===n?void 0:n[e.tabela],handleRegistroEstabelecimento:f}),e&&"date"==e.tipo&&(0,o.jsx)(x.Z,{xs:12,md:3,title:"Data da avalia\xe7\xe3o",disabled:v,value:null==p?void 0:p[e.nomeColuna],type:e.nomeColuna,name:"header.".concat(e.nomeColuna),errors:null==l?void 0:null===(s=l.header)||void 0===s?void 0:s[e.nomeColuna],setDateFormat:P,typeValidation:"dataPassado",daysValidation:365,dateStatus:j,register:a}),e&&"string"==e.tipo&&("numeroRegistro"!=e.nomeColuna||Z>1)&&(0,o.jsx)(c.Z,{xs:12,md:3,title:e.nomeCampo,name:"header.".concat(e.nomeColuna),value:null==p?void 0:p[e.nomeColuna],type:e.nomeColuna,disabled:v,register:a,errors:null==l?void 0:null===(i=l.header)||void 0===i?void 0:i[e.nomeColuna]})]})})})};a.Z=m},84220:function(e,a,l){var o=l(85893),t=l(79072),n=l(55343),s=l(35966),i=l(67836);l(67294);let r=e=>{let{xs:a,md:l,title:r,options:d,block:c,optionsSelected:u,indexFather:x,name:m,type:p,limitTags:v,value:h,required:j,disabled:b,register:Z,multiple:f,setValue:g,errors:C,handleRegistroEstabelecimento:y}=e;return(0,o.jsx)(t.ZP,{item:!0,xs:a,md:l,sx:{my:1},children:(0,o.jsx)(n.Z,{fullWidth:!0,children:(0,o.jsx)(s.Z,{multiple:f,limitTags:v,options:d,getOptionLabel:e=>e.nome,defaultValue:f?h.map(e=>d.find(a=>a.nome===e.nome)):null!=h?h:{nome:""},disabled:b,...Z(m,{required:j}),onChange(e,a){console.log("\uD83D\uDE80 Select => onChange:",a),g(m,a),"registroestabelecimento"==p&&y(a?a.id:null)},renderInput:e=>(0,o.jsx)(i.Z,{...e,label:r,placeholder:r,error:C})})})})};a.Z=r},47842:function(e,a,l){var o=l(85893),t=l(70754),n=l(61953);let s=e=>{let{text:a}=e;return(0,o.jsxs)(n.Z,{sx:{position:"absolute",top:"50%",left:"50%",textAlign:"center"},children:[(0,o.jsx)(t.Z,{}),(0,o.jsx)("p",{children:null!=a?a:"Carregando..."})]})};a.Z=s}}]);