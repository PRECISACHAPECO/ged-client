"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8773],{88773:function(e,r,l){var s=l(85893),i=l(11163),o=l.n(i),t=l(67294),n=l(75442),a=l(49837),d=l(91359),c=l(79072),u=l(29630),m=l(87536),f=l(86501),x=l(45061),v=l(46749),p=l(89191),g=l(49540),h=l(40039),j=l(29308);let Z=e=>{var r,l,i,Z,b,y,C,D,q,k,S,P,E,w;let{paramFornecedorUnidadeID:I}=e,{user:F,setLoggedUnity:N,loggedUnity:Y}=(0,t.useContext)(h.V),[O,z]=(0,t.useState)(!1),[A,M]=(0,t.useState)(),R=I||o().query.id,T=o(),_=(0,v.Lo)(T.pathname),U="/configuracoes/unidade",{trigger:$,handleSubmit:B,setValue:J,reset:V,formState:{errors:K},register:L}=(0,m.cI)(),W=async e=>{if(9==e.length){let r=e.replace(/\D/g,"");n.h.get("https://viacep.com.br/ws/"+r+"/json/").then(e=>{console.log("busca cep",e.data),e.data.localidade?(J("fields.logradouro",e.data.logradouro),J("fields.bairro",e.data.bairro),J("fields.cidade",e.data.localidade),J("fields.uf",e.data.uf),f.ZP.success("Endere\xe7o encontrado!")):f.ZP.error("Endere\xe7o n\xe3o encontrado!")})}},G=async e=>{let r={...e.fields,dataCadastro:(0,g.p6)(e.dataCadastro,"YYYY-MM-DD")};console.log("\uD83D\uDE80 ~ data:",r);try{"new"===_?(await n.h.post("".concat(U,"/novo"),r),f.ZP.success(v.OD.successNew),V(r)):"edit"===_&&(await n.h.put("".concat(U,"/").concat(R),r),f.ZP.success(v.OD.successUpdate),console.log(r))}catch(l){l.response&&409===l.response.status?f.ZP.error(v.OD.errorRepeated):console.log(l)}for(let s in Y)s in r&&(Y[s]=r[s]);localStorage.setItem("loggedUnity",JSON.stringify(Y))},H=async()=>{try{await n.h.delete("".concat(U,"/").concat(R)),T.push(U),f.ZP.success(v.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(v.OD.pendingDelete),z(!1)):console.log(e)}},Q=async()=>{try{let e=await n.h.get("".concat(U,"/").concat(R));V(e.data),M(e.data)}catch(r){console.log(r)}};return(0,t.useEffect)(()=>{Q(),setTimeout(()=>{$()},300)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{children:(0,s.jsxs)("form",{onSubmit:B(G),children:[(0,s.jsx)(p.Z,{btnCancel:1===F.papelID,btnSave:!0,handleSubmit:()=>B(G),btnDelete:"edit"===_&&1===F.papelID,onclickDelete:()=>z(!0)}),(0,s.jsx)(d.Z,{children:(0,s.jsxs)(c.ZP,{container:!0,spacing:4,children:[(0,s.jsx)(j.Z,{xs:12,md:4,title:"Nome Fantasia",name:"fields.nomeFantasia",required:!0,register:L,errors:null==K?void 0:null===(r=K.fields)||void 0===r?void 0:r.nomeFantasia}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Raz\xe3o Social",name:"fields.razaoSocial",required:!0,register:L,errors:null==K?void 0:null===(l=K.fields)||void 0===l?void 0:l.razaoSocial}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"CNPJ",name:"fields.cnpj",mask:"cnpj",required:!0,register:L,errors:null==K?void 0:null===(i=K.fields)||void 0===i?void 0:i.cnpj}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Respons\xe1vel",name:"fields.responsavel",required:!0,register:L,errors:null==K?void 0:null===(Z=K.fields)||void 0===Z?void 0:Z.responsavel}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"E-mail",name:"fields.email",type:"email",required:!0,register:L,errors:null==K?void 0:null===(b=K.fields)||void 0===b?void 0:b.email}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Telefone 1",name:"fields.telefone1",mask:"telefone",required:!1,register:L,errors:null==K?void 0:null===(y=K.fields)||void 0===y?void 0:y.telefone1}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Telefone 2",name:"fields.telefone2",mask:"telefone",required:!1,register:L,errors:null==K?void 0:null===(C=K.fields)||void 0===C?void 0:C.telefone2}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"CEP",name:"fields.cep",getAddressByCep:W,mask:"cep",required:!1,register:L,errors:null==K?void 0:null===(D=K.fields)||void 0===D?void 0:D.cep}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Rua",name:"fields.logradouro",required:!1,register:L,errors:null==K?void 0:null===(q=K.fields)||void 0===q?void 0:q.logradouro}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"N\xfamero",name:"fields.numero",required:!1,register:L,errors:null==K?void 0:null===(k=K.fields)||void 0===k?void 0:k.numero}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Complemento",name:"fields.complemento",required:!1,register:L,errors:null==K?void 0:null===(S=K.fields)||void 0===S?void 0:S.complemento}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Bairro",name:"fields.bairro",required:!1,register:L,errors:null==K?void 0:null===(P=K.fields)||void 0===P?void 0:P.bairro}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"Cidade",name:"fields.cidade",required:!1,register:L,errors:null==K?void 0:null===(E=K.fields)||void 0===E?void 0:E.cidade}),(0,s.jsx)(j.Z,{xs:12,md:4,title:"UF",name:"fields.uf",mask:"estado",required:!1,register:L,errors:null==K?void 0:null===(w=K.fields)||void 0===w?void 0:w.uf})]})})]})}),"edit"===_&&A&&(0,s.jsxs)(u.Z,{variant:"caption",sx:{display:"flex",justifyContent:"end",p:4},children:["Data de cadastro:",(0,g.p6)(A.fields.dataCadastro,"DD/MM/YYYY")]}),(0,s.jsx)(x.Z,{title:"Excluir dado",text:"Tem certeza que deseja excluir?",openModal:O,handleClose:()=>z(!1),handleSubmit:H,btnCancel:!0,btnConfirm:!0})]})};r.Z=Z},45061:function(e,r,l){var s=l(85893),i=l(75084),o=l(29620),t=l(77745),n=l(95398),a=l(76779),d=l(44642);l(21609);var c=l(19604),u=l(29630),m=l(55343),f=l(67836),x=l(67294),v=l(82747);l(84220),l(29308),l(67569),l(3893),l(88475);let p=e=>{let{title:r,text:l,handleClose:p,openModal:g,handleSubmit:h,cnpj:j,gruposAnexo:Z,inputEmail:b,btnCancel:y,btnConfirm:C,grupoAnexosFornecedor:D,btnCancelColor:q,btnConfirmColor:k,closeAfterSave:S,listErrors:P}=e,[E,w]=(0,x.useState)(null),[I,F]=(0,x.useState)(!1);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(o.Z,{open:g,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,r){"backdropClick"!==r&&p()},children:[(0,s.jsx)(t.Z,{id:"form-dialog-title",children:r}),(0,s.jsxs)(n.Z,{children:[(0,s.jsxs)(d.Z,{sx:{mb:3},children:[l,P&&P.status&&(0,s.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,s.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:P.errors.map((e,r)=>(0,s.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},r))})]})]}),b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.Z,{sx:{mt:2},fullWidth:!0,children:[(0,s.jsx)(f.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==E?void 0:E.length)>0&&I,inputProps:{onChange(e){w(e.target.value),F(!(0,v.dI)(e.target.value))}}}),(null==E?void 0:E.length)>0&&I&&(0,s.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,s.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,s.jsxs)(a.Z,{className:"dialog-actions-dense",children:[y&&(0,s.jsx)(i.Z,{variant:"outlined",color:"primary",onClick:p,children:"Cancelar"}),C&&(0,s.jsx)(i.Z,{variant:"contained",disabled:b&&(null==E?void 0:E.length)>0&&I||P&&P.status,color:k||"error",onClick:b&&j?()=>{h(j,Z,E),w(null),S&&p()}:b&&!j?()=>{h(E),w(null),S&&p()}:()=>{h(),S&&p()},children:"Confirmar"})]})]})})};r.Z=p},82747:function(e,r,l){function s(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let r=e.length-2,l=e.substring(0,r),s=e.substring(r),i=0,o=r-7;for(let t=r;t>=1;t--)i+=l.charAt(r-t)*o--,o<2&&(o=9);let n=i%11<2?0:11-i%11;if(n!=s.charAt(0))return!1;r+=1,l=e.substring(0,r),i=0,o=r-7;for(let a=r;a>=1;a--)i+=l.charAt(r-a)*o--,o<2&&(o=9);return(n=i%11<2?0:11-i%11)==s.charAt(1)}function i(e){let r;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let l=0;for(let s=1;s<=9;s++)l+=parseInt(e.substring(s-1,s))*(11-s);if((10==(r=10*l%11)||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;l=0;for(let i=1;i<=10;i++)l+=parseInt(e.substring(i-1,i))*(12-i);return(10==(r=10*l%11)||11===r)&&(r=0),r===parseInt(e.substring(10,11))}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}l.d(r,{dI:function(){return o},sw:function(){return i},zk:function(){return s}})}}]);