"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3310],{33310:function(e,n,i){var a=i(85893),o=i(11163),r=i.n(o),t=i(67294),l=i(60664),s=i(21609),c=i(7071),d=i(49837),u=i(91359),m=i(79072),x=i(55343),p=i(67836),h=i(29630),j=i(14398),Z=i(76992),f=i(29618),b=i(47028),g=i(75158),v=i(75084);i(74231);var y=i(87536),C=i(86501),P=i(45061),D=i(46749),I=i(89191),k=i(40039);let w=()=>{var e,n,i,o;let[w,E]=(0,t.useState)(!1),[G,S]=(0,t.useState)(),{id:A}=r().query,z=r(),F=(0,D.Lo)(z.pathname),N=(0,D.g_)(z.pathname),{user:O,loggedUnity:q}=(0,t.useContext)(k.V),{control:V,handleSubmit:L,formState:{errors:R},reset:W,setValue:_,register:T}=(0,y.cI)({});console.log("errors",R),console.log("Renderiza componente...",q.papelID),G&&G.units&&G.units.map((e,n)=>{_("units[".concat(n,"].unidade"),e.unidade),_("units[".concat(n,"].papel"),e.papel),_("units[".concat(n,"].profissao"),e.profissao),_("units[".concat(n,"].cargo"),e.cargos)});let U=async e=>{console.log("\uD83D\uDE80 ~ onSubmit:",e)},M=async()=>{try{await l.h.delete("".concat(N,"/").concat(A)),z.push(N),C.ZP.success(D.OD.successDelete)}catch(e){e.response&&409===e.response.status?(C.ZP.error(D.OD.pendingDelete),E(!1)):console.log(e)}},B=()=>{let e=[...G.units];e.push({unidade:null,papel:null,profissao:null,cargos:[],status:!0}),S({...G,units:e})},[H,J]=(0,t.useState)(!1),[K,Q]=(0,t.useState)(!1),X=e=>(n,i)=>{J(!!i&&e)},Y=e=>(n,i)=>{Q(!!i&&e)};return(0,t.useEffect)(()=>{let e=async()=>{try{let e=await l.h.get("".concat(N,"/").concat(A,"?unidadeID=").concat(q.unidadeID,"&admin=").concat(O.admin));S(e.data),console.log("\uD83D\uDE80 ~ getData:",e.data)}catch(n){console.log(n)}};e()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{onSubmit:L(U),children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(I.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>L(U),btnDelete:"edit"===F,onclickDelete:()=>E(!0)}),(0,a.jsx)(u.Z,{children:G&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.nome,label:"Nome",placeholder:"Nome","aria-describedby":"validation-schema-nome",name:"nome",...T("nome",{required:!0}),error:R.nome})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.dataNascimento,label:"Data de Nascimento",placeholder:"Data de Nascimento","aria-describedby":"validation-schema-nome",name:"dataNascimento",...T("dataNascimento",{required:!0}),error:R.dataNascimento})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.email,label:"E-mail",placeholder:"E-mail","aria-describedby":"validation-schema-nome",name:"email",...T("email",{required:!0}),error:R.email})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.cpf,label:"CPF",placeholder:"CPF","aria-describedby":"validation-schema-nome",name:"cpf",...T("cpf",{required:!0}),error:R.cpf})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.rg,label:"RG",placeholder:"RG","aria-describedby":"validation-schema-nome",name:"rg",...T("rg",{required:!0}),error:R.rg})})}),0==O.admin&&(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.profissao,label:"Profiss\xe3o",placeholder:"Profiss\xe3o","aria-describedby":"validation-schema-nome",name:"profissao",...T("profissao",{required:!0}),error:R.profissao})})}),0==O.admin&&(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(x.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{defaultValue:null==G?void 0:G.registroConselhoClasse,label:"Registro Conselho Classe",placeholder:"Registro Conselho Classe","aria-describedby":"validation-schema-nome",name:"registroConselhoClasse",...T("registroConselhoClasse",{required:!0}),error:R.registroConselhoClasse})})})]})})})]}),1==O.admin&&(0,a.jsxs)(a.Fragment,{children:[G&&G.units&&G.units.map((r,t)=>{var l,x;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.Z,{sx:{mt:4},children:[(0,a.jsxs)(u.Z,{children:[(0,a.jsxs)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:[r.unidade?r.unidade.nome:"Nova Unidade",(null===(l=r.unidade)||void 0===l?void 0:l.id)===q.unidadeID&&(null===(x=r.papel)||void 0===x?void 0:x.id)===q.papelID&&(0,a.jsx)(c.Z,{size:"small",skin:"light",color:"success",label:"Atual",sx:{mx:2,"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,a.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:3,children:(0,a.jsx)(j.Z,{options:G.unidadesOptions,getOptionLabel:e=>e.nome,defaultValue:null!==(e=null==r?void 0:r.unidade)&&void 0!==e?e:null,name:"units[".concat(t,"].unidade"),...T("units[".concat(t,"].unidade"),{required:!1}),onChange(e,n){console.log("\uD83D\uDE80 ~ value:",n);let i=n?{id:null==n?void 0:n.unidadeID,nome:null==n?void 0:n.nome}:null;_("units[".concat(t,"].unidade"),i)},renderInput(e){var n,i;return(0,a.jsx)(p.Z,{...e,label:"Selecione a unidade",placeholder:"Selecionar unidade","aria-describedby":"formulario-error",error:null===(n=R.units)||void 0===n?void 0:null===(i=n[t])||void 0===i?void 0:i.unidade})}})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:3,children:(0,a.jsx)(j.Z,{options:G.papelOptions,getOptionLabel:e=>e.nome,defaultValue:null!==(n=r.papel)&&void 0!==n?n:null,name:"units[".concat(t,"].papel"),...T("units[".concat(t,"].papel"),{required:!1}),onChange(e,n){let i=n?{id:null==n?void 0:n.papelID,nome:null==n?void 0:n.nome}:null;_("units[".concat(t,"].papel"),i)},renderInput(e){var n,i;return(0,a.jsx)(p.Z,{...e,label:"Selecione o papel",placeholder:"Selecione o papel","aria-describedby":"formulario-error",error:null===(n=R.units)||void 0===n?void 0:null===(i=n[t])||void 0===i?void 0:i.papel})}})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:3,children:(0,a.jsx)(j.Z,{options:G.profissaoOptions,getOptionLabel:e=>e.nome,defaultValue:null!==(i=r.profissao)&&void 0!==i?i:null,name:"units[".concat(t,"].profissao"),...T("units[".concat(t,"].profissao"),{required:!1}),onChange(e,n){let i=n?{id:null==n?void 0:n.profissaoID,nome:null==n?void 0:n.nome}:null;_("units[".concat(t,"].profissao"),i)},renderInput(e){var n,i;return(0,a.jsx)(p.Z,{...e,label:"Selecione a profiss\xe3o",placeholder:"Selecione a profiss\xe3o","aria-describedby":"formulario-error",error:null===(n=R.units)||void 0===n?void 0:null===(i=n[t])||void 0===i?void 0:i.profissao})}})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:3,children:(0,a.jsx)(j.Z,{multiple:!0,limitTags:2,options:G.cargosOptions,getOptionLabel:e=>e.nome||"",defaultValue:null!==(o=r.cargos)&&void 0!==o?o:[],name:"units[".concat(t,"].cargo[]"),...T("units[".concat(t,"].cargo"),{required:!1}),onChange(e,n){let i=n?n.map(e=>({id:null==e?void 0:e.id,nome:null==e?void 0:e.nome})):[];_("units[".concat(t,"].cargo"),i)},renderInput(e){var n,i;return(0,a.jsx)(p.Z,{...e,label:"Cargos",placeholder:"Cargos",error:null===(n=R.units)||void 0===n?void 0:null===(i=n[t])||void 0===i?void 0:i.cargo})}})})]})]}),(0,a.jsx)(u.Z,{children:(0,a.jsxs)(Z.Z,{expanded:H==="panel-".concat(t),onChange:X("panel-".concat(t)),sx:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[(0,a.jsx)(f.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,a.jsx)(s.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(h.Z,{children:"Permiss\xf5es de Acesso"})}),(0,a.jsx)(b.Z,{children:r.menu&&r.menu.map((e,n)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,a.jsx)(h.Z,{variant:"body2",children:e.nome})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(h.Z,{variant:"body2",sx:{textAlign:"center"},children:"Ler"})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(h.Z,{variant:"body2",sx:{textAlign:"center"},children:"Inserir"})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(h.Z,{variant:"body2",sx:{textAlign:"center"},children:"Editar"})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(h.Z,{variant:"body2",sx:{textAlign:"center"},children:"Excluir"})})]}),e.menu&&e.menu.map((e,i)=>(0,a.jsx)(a.Fragment,{children:e.rota?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,a.jsx)(h.Z,{variant:"subtitle1",children:e.nome})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.ler,name:"units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].ler"),...T("units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].ler"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.inserir,name:"units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].inserir"),...T("units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].inserir"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.editar,name:"units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].editar"),...T("units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].editar"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.excluir,name:"units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].excluir"),...T("units[".concat(t,"].menuGroup[").concat(n,"].menu[").concat(i,"].excluir"))})})]})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Z.Z,{expanded:K==="item-".concat(t,"-").concat(n,"-").concat(i),onChange:Y("item-".concat(t,"-").concat(n,"-").concat(i)),sx:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[(0,a.jsx)(f.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,a.jsx)(s.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,a.jsx)(h.Z,{children:e.nome})}),(0,a.jsx)(b.Z,{children:e.submenu&&e.submenu.map((i,o)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,a.jsx)(h.Z,{variant:"subtitle1",children:i.nome})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:i.ler,name:"units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].ler"),...T("units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].ler"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.inserir,name:"units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].inserir"),...T("units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].inserir"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.editar,name:"units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].editar"),...T("units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].editar"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"center"},children:(0,a.jsx)(g.Z,{defaultChecked:e.excluir,name:"units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].excluir"),...T("units[".concat(t,"].menuGroup[").concat(n,"].submenu[").concat(o,"].excluir"))})})]})}))})]})})}))]}))})]})})]})})}),(0,a.jsx)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:(0,a.jsx)(m.ZP,{item:!0,xs:12,md:3,children:(0,a.jsx)(v.Z,{startIcon:(0,a.jsx)(s.Z,{icon:"material-symbols:add-circle-outline-rounded"}),variant:"outlined",onClick(){B()},children:"Inserir unidade"})})})]})]}),(0,a.jsx)(P.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir dado",openModal:w,handleClose:()=>E(!1),handleSubmit:M,btnCancel:!0,btnConfirm:!0})]})};n.Z=w},45061:function(e,n,i){var a=i(85893),o=i(75084),r=i(29620),t=i(77745),l=i(95398),s=i(76779),c=i(44642),d=i(21609);let u=e=>{let{title:n,text:i,handleClose:u,openModal:m,handleSubmit:x,btnCancel:p,btnConfirm:h}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(r.Z,{open:m,onClose:u,"aria-labelledby":"form-dialog-title",children:[(0,a.jsx)(t.Z,{id:"form-dialog-title",children:n}),(0,a.jsx)(l.Z,{children:(0,a.jsx)(c.Z,{sx:{mb:3},children:i})}),(0,a.jsxs)(s.Z,{className:"dialog-actions-dense",children:[p&&(0,a.jsx)(o.Z,{variant:"outlined",color:"primary",startIcon:(0,a.jsx)(d.Z,{icon:"material-symbols:cancel"}),onClick:u,children:"Cancelar"}),h&&(0,a.jsx)(o.Z,{variant:"outlined",color:"error",startIcon:(0,a.jsx)(d.Z,{icon:"line-md:circle-to-confirm-circle-transition"}),onClick:x,children:"Confirmar"})]})]})})};n.Z=u},89191:function(e,n,i){i.d(n,{Z:function(){return g}});var a=i(85893),o=i(11163),r=i.n(o),t=i(67294),l=i(91359),s=i(61953),c=i(75084),d=i(41664),u=i.n(d),m=i(21609),x=i(46749),p=i(73812),h=i(86378),j=i(9942);function Z(e){let{disabled:n,generateReport:i,dataReports:o,open:r,anchorEl:t,handleClick:l,handleClose:s}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(p.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:t,open:r,onClose:s,TransitionComponent:j.Z,children:o.map(e=>(0,a.jsxs)(h.Z,{onClick(){s(),i(e)},children:[(0,a.jsx)("span",{children:e.identification}),(0,a.jsx)("span",{style:{padding:"0 5px"},children:"-"}),(0,a.jsx)("span",{children:e.name})]},e.id))})})}var f=i(40039);let b=e=>{let{btnCancel:n,btnSave:i,handleSubmit:o,btnDelete:d,onclickDelete:p,btnPrint:h,disabled:j,generateReport:b,dataReports:g}=e,v=r(),{routes:y}=(0,t.useContext)(f.V),C=v.pathname.split("/").slice(0,-1).join("/"),[P,D]=(0,t.useState)(null),I=Boolean(P),k=e=>{D(e.currentTarget)},w=()=>{D(null)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsxs)(s.Z,{sx:{display:"flex",gap:"8px"},children:[n&&(0,a.jsx)(u(),{href:(0,x.g_)(v.pathname),children:(0,a.jsx)(c.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,a.jsx)(m.Z,{icon:"material-symbols:arrow-back-rounded"})})}),d&&y.find(e=>e.rota===C&&e.excluir)&&(0,a.jsx)(c.Z,{type:"button",onClick:p,variant:"outlined",color:"error",size:"medium",startIcon:(0,a.jsx)(m.Z,{icon:"material-symbols:delete-outline"}),children:"Excluir"})]}),(0,a.jsxs)(s.Z,{sx:{display:"flex",gap:"8px"},children:[h&&1===g.length&&(0,a.jsx)(c.Z,{id:"fade-button","aria-controls":I?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":I?"true":void 0,onClick:()=>b(g[0]),color:"primary",disabled:j,variant:"outlined",size:"medium",type:"button",startIcon:(0,a.jsx)(m.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),h&&g.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{id:"fade-button","aria-controls":I?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":I?"true":void 0,onClick:k,color:"primary",disabled:j,variant:"outlined",size:"medium",type:"button",startIcon:(0,a.jsx)(m.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),(0,a.jsx)(Z,{generateReport:b,dataReports:g,handleClick:k,handleClose:w,open:I,anchorEl:P})]}),i&&y.find(e=>e.rota===C&&e.editar)&&(0,a.jsx)(c.Z,{onClick:o,type:"submit",variant:"outlined",size:"medium",color:"primary",disabled:j,startIcon:(0,a.jsx)(m.Z,{icon:"material-symbols:save"}),children:"Salvar"})]})]})})};var g=b},46749:function(e,n,i){i.d(n,{Lo:function(){return m},OD:function(){return u},OE:function(){return p},OL:function(){return d},g_:function(){return x}});var a=i(85893),o=i(29630),r=i(41664),t=i.n(r),l=i(7071);i(67294),i(40039);var s=i(60664);let c={1:{title:"Ativo",color:"success"},0:{title:"Inativo",color:"secondary"},10:{title:"Pendente",color:"warning"},20:{title:"Acessou o link",color:"warning"},30:{title:"Em preenchimento",color:"warning"},40:{title:"Fornecedor concluiu preenchimento",color:"warning"},50:{title:"Reprovado",color:"error"},60:{title:"Aprovado Parcial",color:"warning"},70:{title:"Aprovado",color:"success"}},d=(e,n)=>n.map((i,r)=>{let s=n[r].field;return{...i,flex:i.size,renderCell:i=>(0,a.jsx)(t(),{href:"".concat(e,"/").concat(i.row.id),children:(0,a.jsx)(o.Z,{variant:"body2",sx:{color:"text.primary"},children:n&&n.map((e,n)=>{if(e.field===s){if("status"!=e.field)return i.row[e.field];{let o=c[i.row.status];return(0,a.jsx)(l.Z,{size:"small",skin:"light",color:o.color,label:o.title,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}},n)}}})})})}}),u={successNew:"Dados salvos com sucesso!",successUpdate:"Dados atualizados com sucesso!",errorNew:"Erro ao salvar os dados!",errorRepeated:"Dados j\xe1 existentes!",errorUpdate:"Erro ao atualizar os dados!",errorDelete:"Erro ao excluir os dados!",successDelete:"Dados exclu\xeddos com sucesso!",pendingDelete:"Dado n\xe3o pode ser excluido, pois j\xe1 est\xe1 sendo utilizado!",errorGet:"Erro ao obter os dados!",successGet:"Dados obtidos com sucesso!"},m=e=>{let n=e.split("/"),i=n[n.length-1];return"novo"==i?"new":"edit"},x=e=>{let n=e.split("/");return n.pop(),n.join("/")},p=e=>{let n=e.route;s.h.post(n,e.params,{responseType:"arraybuffer"}).then(e=>{let n=new Blob([e.data],{type:"application/pdf"}),i=URL.createObjectURL(n);window.open(i,"_blank")}).catch(e=>{console.error("Erro ao gerar relat\xf3rio",e)})}}}]);