"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8773],{88773:function(e,r,a){var n=a(85893),l=a(11163),o=a.n(l),i=a(67294),t=a(60664),s=a(49837),d=a(91359),c=a(79072),u=a(55343),m=a(67836),h=a(29630),x=a(74231),p=a(87536),f=a(47533),j=a(32631),v=a(86501),b=a(45061),Z=a(46749),g=a(89191),y=a(34175),C=a(82747),P=a(49540),$=a(40039);let D=e=>{let{paramFornecedorUnidadeID:r}=e,{user:a}=(0,i.useContext)($.V),[l,D]=(0,i.useState)(!1),[S,_]=(0,i.useState)(""),B=r||o().query.id,F=o(),E=(0,Z.Lo)(F.pathname),W="/configuracoes/unidade",k=(0,i.useRef)(null),w=x.Ry().shape({nomeFantasia:x.Z_().required(""),razaoSocial:x.Z_().nullable(),cnpj:x.Z_().nullable().test("","",function(e){let{errorCnpj:r}=this.parent;return!r&&(0,C.zk)(e)}),errorCnpj:x.O7().notRequired(),responsavel:x.Z_().nullable(),email:x.Z_().nullable(),dataCadastro:x.Z_().nullable(),telefone1:x.Z_().nullable(),telefone2:x.Z_().nullable(),cep:x.Z_().nullable(),logradouro:x.Z_().nullable(),complemento:x.Z_().nullable(),numero:x.Z_().nullable(),bairro:x.Z_().nullable(),cidade:x.Z_().nullable(),uf:x.Z_().nullable(),status:x.Z_().nullable()}),{control:N,handleSubmit:Q,formState:{errors:z},reset:V,watch:L}=(0,p.cI)({resolver:(0,f.X)(w)}),M=async e=>{if(9==e.length){let r=e.replace(/\D/g,"");t.h.get("https://viacep.com.br/ws/"+r+"/json/").then(e=>{e.data.localidade?(V({...L(),logradouro:e.data.logradouro,bairro:e.data.bairro,cidade:e.data.localidade,uf:e.data.uf}),v.ZP.success("Endere\xe7o encontrado!")):v.ZP.error("Endere\xe7o n\xe3o encontrado!")})}},I=async e=>{let r={...e,dataCadastro:(0,P.p6)(e.dataCadastro,"YYYY-MM-DD")};try{"new"===E?(await t.h.post("".concat(W,"/novo"),r),v.ZP.success(Z.OD.successNew),V(r)):"edit"===E&&(await t.h.put("".concat(W,"/").concat(B),r),v.ZP.success(Z.OD.successUpdate),console.log(r))}catch(a){a.response&&409===a.response.status?v.ZP.error(Z.OD.errorRepeated):console.log(a)}},R=async()=>{try{await t.h.delete("".concat(W,"/").concat(B)),F.push(W),v.ZP.success(Z.OD.successDelete)}catch(e){e.response&&409===e.response.status?(v.ZP.error(Z.OD.pendingDelete),D(!1)):console.log(e)}};return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await t.h.get("".concat(W,"/").concat(B));V(e.data),_(e.data),console.log("vem do banco",e.data)}catch(r){console.log(r)}};e(),"new"===E&&k.current.focus()},[]),console.log("unidade"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{children:(0,n.jsxs)("form",{onSubmit:Q(I),children:[(0,n.jsx)(g.Z,{btnCancel:1===a.papelID,btnSave:!0,handleSubmit:()=>Q(I),btnDelete:"edit"===E&&1===a.papelID,onclickDelete:()=>D(!0)}),(0,n.jsx)(d.Z,{children:(0,n.jsxs)(c.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"nomeFantasia",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Nome Fantasia",onChange:a,placeholder:"Nome Fantasia",error:Boolean(z.nomeFantasia),"aria-describedby":"validation-schema-nomeFantasia",inputRef:k})}}),z.nomeFantasia&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-nomeFantasia",children:z.nomeFantasia.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"razaoSocial",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Raz\xe3o Social",onChange:a,placeholder:"Raz\xe3o Social",error:Boolean(z.razaoSocial),"aria-describedby":"validation-schema-razaoSocial"})}}),z.razaoSocial&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-razaoSocial",children:z.razaoSocial.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"cnpj",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:(0,y.PK)(null!=r?r:""),label:"CNPJ",onChange:a,placeholder:"CNPJ",error:Boolean(z.cnpj),"aria-describedby":"validation-schema-cnpj",inputProps:{maxLength:18,type:"tel",inputMode:"numeric"}})}}),z.cnpj&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-cnpj"})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"responsavel",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Respons\xe1vel",onChange:a,placeholder:"Respons\xe1vel",error:Boolean(z.responsavel),"aria-describedby":"validation-schema-responsavel"})}}),z.responsavel&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-responsavel",children:z.responsavel.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"email",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Email",onChange:a,placeholder:"Email",error:Boolean(z.email),"aria-describedby":"validation-schema-email"})}}),z.email&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-email",children:z.email.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"telefone1",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:(0,y.Bk)(null!=r?r:""),label:"Telefone 1",onChange:a,placeholder:"Telefone 1",error:Boolean(z.telefone1),"aria-describedby":"validation-schema-telefone1",inputProps:{maxLength:15,type:"tel",inputMode:"numeric"}})}}),z.telefone1&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-telefone1",children:z.telefone1.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"telefone2",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:(0,y.Bk)(null!=r?r:""),label:"Telefone 2",onChange:a,placeholder:"Telefone 2",error:Boolean(z.telefone2),"aria-describedby":"validation-schema-telefone2",inputProps:{maxLength:15,type:"tel",inputMode:"numeric"}})}}),z.telefone2&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-telefone2",children:z.telefone2.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"cep",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:(0,y.Tc)(null!=r?r:""),label:"CEP",onChange(e){a(e),M(e.target.value)},placeholder:"CEP",error:Boolean(z.cep),"aria-describedby":"validation-schema-cep",inputProps:{maxLength:9,type:"tel",inputMode:"numeric"}})}}),z.cep&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-cep",children:z.cep.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"logradouro",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Logradouro",onChange:a,placeholder:"Logradouro",error:Boolean(z.logradouro),"aria-describedby":"validation-schema-logradouro"})}}),z.logradouro&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-logradouro",children:z.logradouro.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"numero",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"N\xfamero",onChange:a,placeholder:"N\xfamero",error:Boolean(z.numero),"aria-describedby":"validation-schema-numero",inputProps:{type:"tel",inputMode:"numeric"}})}}),z.numero&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-numero",children:z.numero.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"complemento",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Complemento",onChange:a,placeholder:"Complemento",error:Boolean(z.complemento),"aria-describedby":"validation-schema-complemento"})}}),z.complemento&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-complemento",children:z.complemento.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"bairro",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:null!=r?r:"",label:"Bairro",onChange:a,placeholder:"Bairro",error:Boolean(z.bairro),"aria-describedby":"validation-schema-bairro"})}}),z.bairro&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-bairro",children:z.bairro.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"cidade",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{label:"Cidade",onChange:a,placeholder:"Cidade",error:Boolean(z.cidade),"aria-describedby":"validation-schema-cidade",value:null!=r?r:"",defaultValue:"aaaaa"})}}),z.cidade&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-cidade",children:z.cidade.message})]})}),(0,n.jsx)(c.ZP,{item:!0,xs:12,md:4,children:(0,n.jsxs)(u.Z,{fullWidth:!0,children:[(0,n.jsx)(p.Qr,{name:"uf",control:N,render(e){let{field:{value:r,onChange:a}}=e;return(0,n.jsx)(m.Z,{value:(0,y.CL)(null!=r?r:""),label:"UF",onChange:a,placeholder:"UF",error:Boolean(z.uf),"aria-describedby":"validation-schema-uf",inputProps:{maxLength:2}})}}),z.uf&&(0,n.jsx)(j.Z,{sx:{color:"error.main"},id:"validation-schema-uf",children:z.uf.message})]})})]})})]})}),"edit"===E&&(0,n.jsxs)(h.Z,{variant:"caption",sx:{display:"flex",justifyContent:"end",p:4},children:["Data de cadastro:",(0,P.p6)(S.dataCadastro,"DD/MM/YYYY")]}),(0,n.jsx)(b.Z,{title:"Excluir dado",text:"Tem certeza que deseja excluir?",openModal:l,handleClose:()=>D(!1),handleSubmit:R,btnCancel:!0,btnConfirm:!0})]})};r.Z=D},45061:function(e,r,a){var n=a(85893),l=a(75084),o=a(29620),i=a(77745),t=a(95398),s=a(76779),d=a(44642);a(21609);var c=a(19604),u=a(29630),m=a(55343),h=a(67836),x=a(67294),p=a(82747);let f=e=>{let{title:r,text:a,handleClose:f,openModal:j,handleSubmit:v,cnpj:b,inputEmail:Z,btnCancel:g,btnConfirm:y,btnCancelColor:C,btnConfirmColor:P,closeAfterSave:$,listErrors:D}=e,[S,_]=(0,x.useState)(null),[B,F]=(0,x.useState)(!1);return console.log("dialog email: ",S),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.Z,{open:j,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,r){"backdropClick"!==r&&f()},children:[(0,n.jsx)(i.Z,{id:"form-dialog-title",children:r}),(0,n.jsxs)(t.Z,{children:[(0,n.jsxs)(d.Z,{sx:{mb:3},children:[a,D&&D.status&&(0,n.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,n.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:D.errors.map((e,r)=>(0,n.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},r))})]})]}),Z&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.Z,{sx:{mt:2},fullWidth:!0,children:[(0,n.jsx)(h.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==S?void 0:S.length)>0&&B,inputProps:{onChange(e){_(e.target.value),F(!(0,p.dI)(e.target.value))}}}),(null==S?void 0:S.length)>0&&B&&(0,n.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,n.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,n.jsxs)(s.Z,{className:"dialog-actions-dense",children:[g&&(0,n.jsx)(l.Z,{variant:"outlined",color:"primary",onClick:f,children:"Cancelar"}),y&&(0,n.jsx)(l.Z,{variant:"contained",disabled:Z&&(null==S?void 0:S.length)>0&&B,color:P||"error",onClick:Z&&b?()=>{v(b,S),_(null),$&&f()}:Z&&!b?()=>{v(S),_(null),$&&f()}:()=>{v(),$&&f()},children:"Confirmar"})]})]})})};r.Z=f},34175:function(e,r,a){function n(e){return e&&(e=(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/^(\d{2})(\d)/,"$1.$2")).replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1/$2")).replace(/(\d{4})(\d)/,"$1-$2")),e}function l(e){return e&&(e=(e=(e=(e=e.replace(/\D/g,"")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2")),e}function o(e){return e=(e=(e=(e=e.replace(/\D/g,"")).replace(/^(\d{2})(\d)/g,"($1) $2")).replace(/(\d)(\d{4})$/,"$1-$2")).replace(/\)-/,")")}function i(e){return e=(e=e.replace(/\D/g,"")).replace(/^(\d{5})(\d)/,"$1-$2")}function t(e){return e=(e=e.toUpperCase()).replace(/[^A-Z]/g,"")}a.d(r,{Bk:function(){return o},CL:function(){return t},PK:function(){return n},Tc:function(){return i},VL:function(){return l}})},82747:function(e,r,a){function n(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let r=e.length-2,a=e.substring(0,r),n=e.substring(r),l=0,o=r-7;for(let i=r;i>=1;i--)l+=a.charAt(r-i)*o--,o<2&&(o=9);let t=l%11<2?0:11-l%11;if(t!=n.charAt(0))return!1;r+=1,a=e.substring(0,r),l=0,o=r-7;for(let s=r;s>=1;s--)l+=a.charAt(r-s)*o--,o<2&&(o=9);return(t=l%11<2?0:11-l%11)==n.charAt(1)}function l(e){let r;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let a=0;for(let n=1;n<=9;n++)a+=parseInt(e.substring(n-1,n))*(11-n);if((10==(r=10*a%11)||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;a=0;for(let l=1;l<=10;l++)a+=parseInt(e.substring(l-1,l))*(12-l);return(10==(r=10*a%11)||11===r)&&(r=0),r===parseInt(e.substring(10,11))}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}a.d(r,{dI:function(){return o},sw:function(){return l},zk:function(){return n}})},47533:function(e,r,a){a.d(r,{X:function(){return t}});var n=a(87536),l=function(e,r,a){if(e&&"reportValidity"in e){var l=(0,n.U2)(a,r);e.setCustomValidity(l&&l.message||""),e.reportValidity()}},o=function(e,r){var a=function(a){var n=r.fields[a];n&&n.ref&&"reportValidity"in n.ref?l(n.ref,a,e):n.refs&&n.refs.forEach(function(r){return l(r,a,e)})};for(var n in r.fields)a(n)},i=function(e,r){r.shouldUseNativeValidation&&o(e,r);var a={};for(var l in e){var i=(0,n.U2)(r.fields,l);(0,n.t8)(a,l,Object.assign(e[l],{ref:i&&i.ref}))}return a},t=function(e,r,a){return void 0===r&&(r={}),void 0===a&&(a={}),function(l,t,s){try{return Promise.resolve(function(n,i){try{var d=(r.context,Promise.resolve(e["sync"===a.mode?"validateSync":"validate"](l,Object.assign({abortEarly:!1},r,{context:t}))).then(function(e){return s.shouldUseNativeValidation&&o({},s),{values:a.rawValues?l:e,errors:{}}}))}catch(c){return i(c)}return d&&d.then?d.then(void 0,i):d}(0,function(e){var r;if(!e.inner)throw e;return{values:{},errors:i((r=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,(e.inner||[]).reduce(function(e,a){if(e[a.path]||(e[a.path]={message:a.message,type:a.type}),r){var l=e[a.path].types,o=l&&l[a.type];e[a.path]=(0,n.KN)(a.path,r,e,a.type,o?[].concat(o,a.message):a.message)}return e},{})),s)}}))}catch(d){return Promise.reject(d)}}}}}]);