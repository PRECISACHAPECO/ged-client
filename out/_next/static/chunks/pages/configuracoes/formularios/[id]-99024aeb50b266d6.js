(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8207],{75158:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var a=n(63366),o=n(87462),i=n(67294),s=n(86010),c=n(94780),l=n(41796),r=n(37743),d=n(54235),m=n(85893),u=(0,d.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),b=n(36622),p=n(78884),j=n(67074),Z=n(1588),v=n(34867);function f(e){return(0,v.Z)("MuiCheckbox",e)}let k=(0,Z.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),g=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],P=e=>{let{classes:t,indeterminate:n,color:a}=e,i={root:["root",n&&"indeterminate",`color${(0,b.Z)(a)}`]},s=(0,c.Z)(i,f,t);return(0,o.Z)({},t,s)},I=(0,j.ZP)(r.Z,{shouldForwardProp:e=>(0,j.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver(e,t){let{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t[`color${(0,b.Z)(n.color)}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,l.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${k.checked}, &.${k.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${k.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),y=(0,m.jsx)(x,{}),C=(0,m.jsx)(u,{}),D=(0,m.jsx)(h,{}),S=i.forwardRef(function(e,t){var n,c;let l=(0,p.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:r=y,color:d="primary",icon:u=C,indeterminate:x=!1,indeterminateIcon:h=D,inputProps:b,size:j="medium",className:Z}=l,v=(0,a.Z)(l,g),f=x?h:u,k=x?h:r,S=(0,o.Z)({},l,{color:d,indeterminate:x,size:j}),F=P(S);return(0,m.jsx)(I,(0,o.Z)({type:"checkbox",inputProps:(0,o.Z)({"data-indeterminate":x},b),icon:i.cloneElement(f,{fontSize:null!=(n=f.props.fontSize)?n:j}),checkedIcon:i.cloneElement(k,{fontSize:null!=(c=k.props.fontSize)?c:j}),ownerState:S,ref:t,className:(0,s.Z)(F.root,Z)},v,{classes:F}))});var F=S},64876:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/formularios/[id]",function(){return n(98480)}])},89191:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(85893),o=n(11163),i=n.n(o),s=n(67294),c=n(91359),l=n(61953),r=n(75084),d=n(72389),m=n(41664),u=n.n(m),x=n(21609),h=n(46749),b=n(73812),p=n(86378),j=n(9942);function Z(e){let{disabled:t,dataReports:n,open:o,anchorEl:i,handleClick:s,handleClose:c,generateReport:l}=e;return(0,a.jsx)("div",{children:(0,a.jsx)(b.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:i,open:o,onClose:c,TransitionComponent:j.Z,children:n.map(e=>(0,a.jsxs)(p.Z,{onClick(){c(),l(e)},children:[(0,a.jsx)("span",{children:e.identification}),(0,a.jsx)("span",{style:{padding:"0 5px"},children:"-"}),(0,a.jsx)("span",{children:e.name})]},e.id))})})}n(60565);var v=n(40039),f=n(10160);let k=e=>{let{btnCancel:t,btnSave:n,btnSend:o,btnStatus:m,handleSubmit:b,disabledSubmit:p,handleSend:j,disabledSend:k,handleBtnStatus:g,btnDelete:P,onclickDelete:I,btnPrint:y,disabledPrint:C,disabled:D,dataReports:S,generateReport:F}=e,V=i(),{user:w,routes:B}=(0,s.useContext)(v.V),[q,O]=(0,s.useState)(!1),[z,W]=(0,s.useState)(null),E=Boolean(z),R=e=>{W(e.currentTarget)},M=()=>{W(null)},N=(()=>{let e=V.pathname.split("/").slice(0,-1).join("/");return e||V.pathname})(),_=()=>{window.scrollTo({top:0,behavior:"smooth"})},A=()=>{window.history.back()};return(0,s.useEffect)(()=>{let e=()=>{O(!1),window.scrollY>0?O(!0):O(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,a.jsxs)(l.Z,{sx:{display:"flex",gap:"8px"},children:[t&&(0,a.jsx)(u(),{href:(0,h.g_)(V.pathname),children:(0,a.jsx)(r.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,a.jsx)(x.Z,{icon:"material-symbols:arrow-back-rounded"})})}),P&&B.find(e=>e.rota===N&&e.excluir)&&(0,a.jsx)(r.Z,{type:"button",onClick:I,variant:"outlined",color:"error",size:"medium",startIcon:(0,a.jsx)(x.Z,{icon:"material-symbols:delete-outline"}),children:"Excluir"}),m&&(0,a.jsx)(r.Z,{type:"button",onClick:g,variant:"outlined",color:"primary",size:"medium",startIcon:(0,a.jsx)(x.Z,{icon:"fluent:status-12-filled"}),children:"Status"})]}),(0,a.jsxs)(l.Z,{sx:{display:"flex",gap:"8px"},children:[y&&1===S.length&&(0,a.jsx)(r.Z,{id:"fade-button","aria-controls":E?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:()=>F(S[0]),color:"primary",disabled:D||C,variant:"outlined",size:"medium",type:"button",startIcon:(0,a.jsx)(x.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),y&&S.length>1&&(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(r.Z,{id:"fade-button","aria-controls":E?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:R,color:"primary",disabled:D||C,variant:"outlined",size:"medium",type:"button",sx:{mr:0},startIcon:(0,a.jsx)(x.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),(0,a.jsx)(Z,{generateReport:F,dataReports:S,handleClick:R,handleClose:M,open:E,anchorEl:z})]}),n&&B.find(e=>e.rota===N&&e.editar)&&(0,a.jsx)(r.Z,{onClick:b,type:"submit",variant:"outlined",size:"medium",color:"primary",disabled:D||p,startIcon:(0,a.jsx)(x.Z,{icon:"material-symbols:save"}),children:"Salvar"}),o&&(0,a.jsx)(r.Z,{onClick:j,type:"button",variant:"contained",size:"medium",color:"primary",disabled:D||k,startIcon:(0,a.jsx)(x.Z,{icon:"carbon:send-filled"}),children:"Concluir Formul\xe1rio"}),(0,a.jsx)("div",{className:"\n                        ".concat(q?"fadeIn":"hidden"," trasition duration-200 fixed bottom-10 right-8 z-50 flex flex-col-reverse gap-3\n                    "),children:[{id:1,title:"Salvar",color:"primary",size:"large",type:"submit",variant:"contained",disabled:D||p,icon:"material-symbols:save",function:b},{id:2,title:"Imprimir",color:"default",size:"large",type:"button",variant:"outlined",disabled:D||C,icon:"material-symbols:print",function:R},{id:3,title:"Voltar ao topo",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"ion:arrow-up",function:_},{id:4,title:"Voltar para a p\xe1gina anterior",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"material-symbols:arrow-back-rounded",function:A}].map(e=>(1!==e.id||n&&B.find(e=>e.rota===N&&e.editar))&&(2!==e.id||y)?(0,a.jsx)(d.Z,{title:e.title,placement:"left",children:(0,a.jsx)("div",{children:(0,a.jsx)(f.Z,{color:e.color,size:"large",onClick:e.function,variant:"contained",type:e.type,disabled:e.disabled,children:(0,a.jsx)(x.Z,{icon:e.icon})})},e.id)},e.id):null)})]})]})})};var g=k},47842:function(e,t,n){"use strict";var a=n(85893),o=n(70754),i=n(61953);let s=()=>(0,a.jsx)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%"},children:(0,a.jsx)(o.Z,{})});t.Z=s},98480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var a=n(85893),o=n(11163),i=n.n(o),s=n(67294),c=n(87536),l=n(49837),r=n(91359),d=n(85214),m=n(79072),u=n(81284),x=n(95309),h=n(29630),b=n(75158),p=n(67836),j=n(55343),Z=n(19604),v=n(22841),f=n(35966),k=n(75084),g=n(72389),P=n(80562),I=n(46749),y=n(60664),C=n(89191),D=n(60565),S=n(40039),F=n(86501),V=n(47842),w=n(21609),B=n(29620),q=n(77745),O=n(95398),z=n(76779),W=n(44642),E=n(61953),R=n(22416),M=n(16056);let N=e=>{let{openModal:t,setOpenModalConfirmScore:n,itemScore:o,setItemScore:i}=e,s=()=>{n(!1)},{handleSubmit:l,register:r}=(0,c.cI)({}),d=e=>{let t={alternativaID:null==o?void 0:o.alternativaID,pontuacao:(null==e?void 0:e.pontuacao)?1:0,parFornecedorBlocoItemID:null==o?void 0:o.parFornecedorBlocoItemID,alternatives:null==o?void 0:o.alternatives.map((t,n)=>({alternativaItemID:null==t?void 0:t.alternativaItemID,score:e[null==t?void 0:t.nome]}))};y.h.post("/formularios/fornecedor/saveItemScore",{data:t}).then(e=>{n(!1),F.Am.success("Pontua\xe7\xe3o salva com sucesso!")})};return(0,a.jsx)(a.Fragment,{children:(null==o?void 0:o.alternatives)&&(0,a.jsx)(B.Z,{open:t,onClose:s,"aria-labelledby":"form-dialog-title",children:(0,a.jsxs)("form",{onSubmit:l(d),children:[(0,a.jsx)(q.Z,{id:"form-dialog-title",children:"Pontua\xe7\xe3o das respostas"}),(0,a.jsxs)(O.Z,{children:[(0,a.jsx)(W.Z,{sx:{mb:3},children:"Defina a pontua\xe7\xe3o para cada alternativa"}),(0,a.jsx)(E.Z,{sx:{mb:4},children:(0,a.jsx)(R.Z,{row:!0,children:(0,a.jsx)(v.Z,{label:"Habilitar pontua\xe7\xe3o",control:(0,a.jsx)(M.Z,{name:"pontuacao",...r("pontuacao"),checked:(null==o?void 0:o.pontuacao)==1,onChange(e){i({...o,pontuacao:e.target.checked?1:0})}})})})}),o&&(null==o?void 0:o.alternatives.map((e,t)=>(0,a.jsx)(m.ZP,{md:12,sx:{mb:4},children:(0,a.jsx)("grid",{item:!0,md:12,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{disabled:1!=o.pontuacao,id:"outlined-basic",label:null==e?void 0:e.nome,...r("".concat(null==e?void 0:e.nome)),name:"".concat(null==e?void 0:e.nome),defaultValue:null==e?void 0:e.score,variant:"outlined",size:"small",type:"number",title:0!=o.pontuacao||"Habilite a pontua\xe7\xe3o para preencher"})})})},t)))]}),(0,a.jsxs)(z.Z,{className:"dialog-actions-dense",children:[(0,a.jsx)(k.Z,{variant:"outlined",color:"primary",onClick:s,children:"Cancelar"}),(0,a.jsx)(k.Z,{variant:"contained",color:"primary",onClick:l(d),children:"Confirmar"})]})]})})})},_=()=>{var e,t,n;let{user:o,loggedUnity:B}=(0,s.useContext)(S.V),[q,O]=(0,s.useState)(),[z,W]=(0,s.useState)(null),[E,R]=(0,s.useState)([]),[M,_]=(0,s.useState)(),[A,L]=(0,s.useState)(),[H,$]=(0,s.useState)(!1),[T,U]=(0,s.useState)(),[X,Y]=(0,s.useState)(!1),[G,J]=(0,s.useState)(!1),K=i(),Q=(0,I.g_)(K.pathname),{setTitle:ee}=(0,s.useContext)(D.f),{setValue:et,register:en,handleSubmit:ea,reset:eo,trigger:ei,getValues:es,formState:{errors:ec}}=(0,c.cI)(),el=async e=>{let t={unidadeID:B.unidadeID,header:e.headers,blocks:e.blocks,orientacoes:e.orientacoes};console.log("\uD83D\uDE80 ~ onSubmit:",t);try{await y.h.put("".concat(Q,"/fornecedor/updateData"),t).then(e=>{F.ZP.success(I.OD.successUpdate),J(!G)})}catch(n){console.log(n)}},er=(e,t)=>{let n=z.itens;n=n.filter(t=>{let n=e.itens.some(e=>e.item&&t.id===e.item.id);return!n});let a=[...M];a[t].optionsBlock.itens=n,_(a)},ed=e=>{var t;let n=[...M];n[e].itens.push({ordem:(null===(t=n[e].itens)||void 0===t?void 0:t.length)+1,obs:1,status:1,obrigatorio:1}),_(n),et("blocks.[".concat(e,"].itens.[").concat(n[e].itens.length-1,"].new"),!0),et("blocks.[".concat(e,"].itens.[").concat(n[e].itens.length-1,"].removed"),!1),er(n[e],e)},em=(e,t,n)=>{if(console.log("\uD83D\uDE80 ~ length:",M[t].itens.length),1==M[t].itens.length){F.ZP.error("Voc\xea deve ter ao menos um item!");return}console.log("\uD83D\uDE80 ~ item, indexBlock, indexItem:",e,t,n),e.removed=!0,et("blocks.[".concat(t,"].itens.[").concat(n,"].removed"),!0),et("blocks.[".concat(t,"].itens.[").concat(n,"].new"),!1);let a=[...M[t].itens];a.splice(n,1),_([...M,M[t].itens=a]),er(M[t],t)},eu=e=>{U(null),y.h.post("/formularios/fornecedor/getItemScore",{data:e}).then(e=>{U(e.data)}),U&&$(!0)},ex=()=>{let e=[...M];e.push({dados:{ordem:e.length+1,nome:"",status:1},atividades:[...M[0].atividades.map(e=>({...e,checked:0}))],categorias:[...M[0].categorias.map(e=>({...e,checked:0}))],itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),_(e)},eh=e=>{e.blocks.map((e,t)=>{e.itens.map((e,n)=>{e&&(et("blocks.[".concat(t,"].itens.[").concat(n,"].item"),e.item),et("blocks.[".concat(t,"].itens.[").concat(n,"].alternativa"),e.alternativa))})})},eb=()=>{try{Y(!0),y.h.post("".concat(Q,"/fornecedor/getData"),{unidadeID:B.unidadeID}).then(e=>{console.log("getdata",e.data),O(e.data.header),_(e.data.blocks),W({itens:e.data.options.itens,alternativas:e.data.options.alternativas}),L(e.data.orientations),eh(e.data),Y(!1)})}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{ee("Formul\xe1rio do Fornecedor"),eb()},[G]),(0,a.jsx)(a.Fragment,{children:X?(0,a.jsx)(V.Z,{}):(0,a.jsxs)("form",{onSubmit:ea(el),children:[q&&(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>ea(el)}),(0,a.jsx)(r.Z,{children:(0,a.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(m.ZP,{item:!0,md:4,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),q.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parFornecedorID"),defaultValue:e.parFornecedorID,...en("headers.[".concat(t,"].parFornecedorID"))}),(0,a.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...en("headers.[".concat(t,"].mostra")),defaultChecked:1==q[t].mostra})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...en("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==q[t].obrigatorio})})]})},t)}))]})})})]}),!M&&(0,a.jsx)(V.Z,{}),M&&M.map((n,o)=>(0,a.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].parFornecedorBlocoID"),defaultValue:n.dados.parFornecedorBlocoID,...en("blocks.[".concat(o,"].parFornecedorBlocoID"))}),(0,a.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,a.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].sequencia"),defaultValue:n.dados.ordem,...en("blocks.[".concat(o,"].sequencia"))})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(o,"].nome"),defaultValue:n.dados.nome,...en("blocks.[".concat(o,"].nome"))})})}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,a.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].status"),...en("blocks.[".concat(o,"].status")),defaultChecked:1==M[o].dados.status})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,a.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].obs"),...en("blocks.[".concat(o,"].obs")),defaultChecked:1==M[o].dados.obs})]})]}),(0,a.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:2},children:(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(Z.Z,{severity:"info",children:"Esse bloco ser\xe1 habilitado para o Fornecedor se satisfazer as condi\xe7\xf5es abaixo:"})})}),(0,a.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:3,children:[(0,a.jsx)(u.ZP,{disablePadding:!0,children:(0,a.jsx)(x.Z,{children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco quando \xe9:"})})}),n.categorias&&n.categorias.map((e,t)=>(0,a.jsx)(u.ZP,{disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].categorias[").concat(t,"].categoriaID"),defaultValue:e.categoriaID,...en("blocks.[".concat(o,"].categorias[").concat(t,"].categoriaID"))}),(0,a.jsx)(v.Z,{control:(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].categorias[").concat(t,"].checked"),...en("blocks.[".concat(o,"].categorias[").concat(t,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},t))]}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:4,children:[(0,a.jsx)(u.ZP,{disablePadding:!0,children:(0,a.jsx)(x.Z,{children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco se atividade for:"})})}),n.atividades&&n.atividades.map((e,t)=>(0,a.jsx)(u.ZP,{disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].atividades[").concat(t,"].atividadeID"),defaultValue:e.atividadeID,...en("blocks.[".concat(o,"].atividades[").concat(t,"].atividadeID"))}),(0,a.jsx)(v.Z,{control:(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].atividades[").concat(t,"].checked"),...en("blocks.[".concat(o,"].atividades[").concat(t,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},t))]})]}),n.itens&&n.itens.map((n,i)=>{var s;return(0,a.jsxs)(m.ZP,{id:"item-".concat(o,"-").concat(i),container:!0,spacing:4,sx:{mt:4},children:[(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].itens.[").concat(i,"].parFornecedorBlocoItemID"),defaultValue:n.parFornecedorBlocoItemID,...en("blocks.[".concat(o,"].itens.[").concat(i,"].parFornecedorBlocoItemID"))}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"right"},children:(0,a.jsx)(j.Z,{children:(0,a.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),defaultValue:n.ordem,...en("blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"))})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:""!==M[o].itens[i].nome&&(0,a.jsx)(f.Z,{options:null===(s=M[o].optionsBlock)||void 0===s?void 0:s.itens,getOptionLabel:e=>null==e?void 0:e.nome,value:null!==(e=M[o].itens[i].item)&&void 0!==e?e:{nome:""},disabled:1===M[o].itens[i].hasPending||0===M[o].itens[i].status,name:"blocks.[".concat(o,"].itens.[").concat(i,"].item"),...en("blocks.[".concat(o,"].itens.[").concat(i,"].item"),{required:!0}),onChange(e,t){let n=null!=t?t:null;console.log("\uD83D\uDE80 ~ newValue:",n),et("blocks.[".concat(o,"].itens.[").concat(i,"].item"),n);let a=[...M];a[o].itens[i].item=n,_(a),er(a[o],o)},renderInput(e){var t,n,s;return(0,a.jsx)(p.Z,{...e,label:M[o].itens[i].itemID?"Item [".concat(M[o].itens[i].itemID,"]"):"Item",placeholder:M[o].itens[i].itemID?"Item [".concat(M[o].itens[i].itemID,"]"):"Item",error:null===(s=null==ec?void 0:null===(t=ec.blocks)||void 0===t?void 0:null===(n=t[o])||void 0===n?void 0:n.itens[i])||void 0===s?void 0:s.item})}})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(f.Z,{options:z.alternativas,getOptionLabel:e=>e.nome||"",defaultValue:null!==(t=M[o].itens[i].alternativa)&&void 0!==t?t:{nome:""},disabled:1==n.hasPending||0==n.status,name:"blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),...en("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),{required:!0}),onChange(e,t){et("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),null!=t?t:null)},renderInput(e){var t,n,s;return(0,a.jsx)(p.Z,{...e,label:"Alternativa",placeholder:"Alternativa",error:null===(s=null==ec?void 0:null===(t=ec.blocks)||void 0===t?void 0:null===(n=t[o])||void 0===n?void 0:n.itens[i])||void 0===s?void 0:s.alternativa})}})})}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Ativo":""}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].status"),...en("blocks.[".concat(o,"].itens.[").concat(i,"].status")),defaultChecked:1==n.status})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Obs":""}),(0,a.jsx)(b.Z,{disabled:0==n.status,name:"blocks.[".concat(o,"][").concat(i,"].obs"),...en("blocks.[".concat(o,"].itens.[").concat(i,"].obs")),defaultChecked:1==n.obs})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Obrigat\xf3rio":""}),(0,a.jsx)(b.Z,{disabled:0==n.status,name:"blocks.[".concat(o,"][").concat(i,"].obrigatorio"),...en("blocks.[".concat(o,"].itens.[").concat(i,"].obrigatorio")),defaultChecked:1==n.obrigatorio})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Pontua\xe7\xe3o":""}),(0,a.jsx)(k.Z,{style:0===n.pontuacao?{opacity:.3}:{},title:n.parFornecedorBlocoID?"Definir pontua\xe7\xe3o para as respostas":"Salve o bloco para definir a pontua\xe7\xe3o",disabled:!n.parFornecedorBlocoID,onClick:()=>eu(n),children:(0,a.jsx)(w.Z,{icon:"ic:baseline-assessment"})})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Remover":""}),(0,a.jsx)(g.Z,{title:1==n.hasPending?"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio":"Remover este item",children:(0,a.jsx)(P.Z,{color:"error",onClick(){1==n.hasPending||em(n,o,i)},sx:{opacity:1==n.hasPending?.5:1,cursor:1==n.hasPending?"default":"pointer"},children:(0,a.jsx)(w.Z,{icon:"tabler:trash-filled"})})})]})]},i)}),H&&T&&(0,a.jsx)(N,{openModal:H,setOpenModalConfirmScore:$,itemScore:T,setItemScore:U}),(0,a.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:4},children:(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(k.Z,{variant:"outlined",color:"primary",startIcon:(0,a.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ed(o)},children:"Inserir Item"})})})]})},o)),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,a.jsx)(k.Z,{variant:"outlined",color:"primary",startIcon:(0,a.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ex()},children:"Inserir Bloco"})}),(0,a.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,a.jsx)(r.Z,{children:(0,a.jsx)(m.ZP,{container:!0,spacing:4,children:(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(p.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",rows:4,multiline:!0,fullWidth:!0,name:"orientacoes",defaultValue:null!==(n=null==A?void 0:A.obs)&&void 0!==n?n:"",...en("orientacoes")})})})})})]})})},A=()=>{var e,t;let{user:n,loggedUnity:o}=(0,s.useContext)(S.V),[Z,v]=(0,s.useState)(),[g,P]=(0,s.useState)(),[B,q]=(0,s.useState)(null),[O,z]=(0,s.useState)([]),[W,E]=(0,s.useState)(null),[R,M]=(0,s.useState)(!1),[N,_]=(0,s.useState)(!1),A=i(),L=(0,I.g_)(A.pathname),{setTitle:H}=(0,s.useContext)(D.f),{setValue:$,register:T,handleSubmit:U,formState:{errors:X}}=(0,c.cI)(),Y=e=>{e.blocks.map((e,t)=>{e.itens.map((e,n)=>{e&&($("blocks.[".concat(t,"].itens.[").concat(n,"].item"),e.item),$("blocks.[".concat(t,"].itens.[").concat(n,"].alternativa"),e.alternativa))})})},G=async e=>{let t={unidadeID:o.unidadeID,header:e.headers,products:e.products,blocks:e.blocks,orientacoes:e.orientacoes};console.log("onSubmit: ",t);try{await y.h.put("".concat(L,"/recebimentoMp/updateData"),t).then(e=>{F.ZP.success(I.OD.successUpdate),M(!R)})}catch(n){console.log(n)}},J=e=>{let t=[...O];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),z(t)},K=()=>{let e=[...O];e.push({dados:{ordem:e.length+1,nome:"",status:1},itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),z(e)},Q=()=>{try{_(!0),y.h.post("".concat(L,"/recebimentoMp/getData"),{unidadeID:o.unidadeID}).then(e=>{console.log("getData: ",e.data),v(e.data.header),P(e.data.products),z(e.data.blocks),E(e.data.orientacoes.obs),q(e.data.options),Y(e.data),_(!1)})}catch(e){console.log(e)}};return(0,s.useEffect)(()=>{console.log("no useEffect savingForm"),H("Formul\xe1rio do Recebimento de MP"),Q()},[R]),console.log("errors: ",X),(0,a.jsx)(a.Fragment,{children:N?(0,a.jsx)(V.Z,{}):(0,a.jsxs)("form",{onSubmit:U(G),children:[Z&&(0,a.jsxs)(l.Z,{children:[(0,a.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>U(G)}),(0,a.jsx)(r.Z,{children:(0,a.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(m.ZP,{item:!0,md:4,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),Z.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parRecebimentompID"),defaultValue:e.parRecebimentompID,...T("headers.[".concat(t,"].parRecebimentompID"))}),(0,a.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...T("headers.[".concat(t,"].mostra")),defaultChecked:1==Z[t].mostra})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...T("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==Z[t].obrigatorio})})]})},t)}))]})})})]}),g&&(0,a.jsx)(l.Z,{sx:{mt:4},children:(0,a.jsx)(r.Z,{children:(0,a.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,a.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)(m.ZP,{item:!0,md:4,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),g.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,a.jsxs)(x.Z,{children:[(0,a.jsx)("input",{type:"hidden",name:"products.[".concat(t,"].parRecebimentoMpProdutoID"),defaultValue:e.parRecebimentompProdutoID,...T("products.[".concat(t,"].parRecebimentoMpProdutoID"))}),(0,a.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"products.[".concat(t,"].mostra"),...T("products.[".concat(t,"].mostra")),defaultChecked:1==g[t].mostra})}),(0,a.jsx)(m.ZP,{item:!0,md:3,children:(0,a.jsx)(b.Z,{name:"products.[".concat(t,"].obrigatorio"),...T("products.[".concat(t,"].obrigatorio")),defaultChecked:1==g[t].obrigatorio})})]})},t)}))]})})})}),O&&O.map((n,o)=>{var i,s,c,d;return(0,a.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,a.jsxs)(r.Z,{children:[(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:4},children:"Bloco ".concat(o+1)}),(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].parRecebimentompBlocoID"),defaultValue:n.dados.parRecebimentompBlocoID,...T("blocks.[".concat(o,"].parRecebimentompBlocoID"))}),(0,a.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].sequencia"),defaultValue:n.dados.ordem,...T("blocks.[".concat(o,"].sequencia"),{required:!0}),error:null!=X&&null!==(i=X.blocks)&&void 0!==i&&null!==(s=i[o])&&void 0!==s&&!!s.sequencia})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(o,"].nome"),defaultValue:n.dados.nome,...T("blocks.[".concat(o,"].nome"),{required:!0}),error:null!=X&&null!==(c=X.blocks)&&void 0!==c&&null!==(d=c[o])&&void 0!==d&&!!d.nome})})}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].status"),...T("blocks.[".concat(o,"].status")),defaultChecked:1==O[o].dados.status})]}),(0,a.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"].obs"),...T("blocks.[".concat(o,"].obs")),defaultChecked:1==O[o].dados.obs})]})]}),(0,a.jsxs)(m.ZP,{container:!0,spacing:4,sx:{mt:0},children:[(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Itens"})}),n.itens&&n.itens.map((n,i)=>{var s,c,l,r;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].itens.[").concat(i,"].parRecebimentompBlocoItemID"),defaultValue:n.parRecebimentompBlocoItemID,...T("blocks.[".concat(o,"].itens.[").concat(i,"].parRecebimentompBlocoItemID"))}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),disabled:0==n.status,defaultValue:n.ordem,...T("blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),{required:!0}),error:null!=X&&null!==(s=X.blocks)&&void 0!==s&&null!==(c=s[o])&&void 0!==c&&null!==(l=c.itens)&&void 0!==l&&null!==(r=l[i])&&void 0!==r&&!!r.sequencia})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(f.Z,{options:B.itens,getOptionLabel:e=>e.nome||"",disabled:0==n.status,defaultValue:null!==(e=O[o].itens[i].item)&&void 0!==e?e:{nome:""},name:"blocks.[".concat(o,"].itens.[").concat(i,"].item"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].item"),{required:!0}),onChange(e,t){$("blocks.[".concat(o,"].itens.[").concat(i,"].item"),null!=t?t:null)},renderInput(e){var t,s,c;return(0,a.jsx)(p.Z,{...e,label:n.itemID>0?"Item [".concat(n.itemID,"]"):"Item",placeholder:n.itemID>0?"Item [".concat(n.itemID,"]"):"Item",error:null===(c=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(s=t[o])||void 0===s?void 0:s.itens[i])||void 0===c?void 0:c.item})}})})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,a.jsx)(j.Z,{fullWidth:!0,children:(0,a.jsx)(f.Z,{options:B.alternativas,getOptionLabel:e=>e.nome||"",disabled:0==n.status,defaultValue:null!==(t=O[o].itens[i].alternativa)&&void 0!==t?t:{nome:""},name:"blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),{required:!0}),onChange(e,t){$("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),null!=t?t:null)},renderInput(e){var t,n,s;return(0,a.jsx)(p.Z,{...e,label:"Alternativa",placeholder:"Alternativa",error:null===(s=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(n=t[o])||void 0===n?void 0:n.itens[i])||void 0===s?void 0:s.alternativa})}})})}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Ativo":""}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].status"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].status")),defaultChecked:1==n.status})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Obs":""}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].obs"),disabled:0==n.status,...T("blocks.[".concat(o,"].itens.[").concat(i,"].obs")),defaultChecked:1==n.obs})]}),(0,a.jsxs)(m.ZP,{item:!0,md:1,children:[(0,a.jsx)(h.Z,{variant:"body2",children:0==i?"Obrigat\xf3rio":""}),(0,a.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].obrigatorio"),disabled:0==n.status,...T("blocks.[".concat(o,"].itens.[").concat(i,"].obrigatorio")),defaultChecked:1==n.obrigatorio})]})]})}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(k.Z,{variant:"outlined",color:"primary",startIcon:(0,a.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){J(o)},children:"Inserir Item"})})]})]})},o)}),(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,a.jsx)(k.Z,{variant:"outlined",color:"primary",startIcon:(0,a.jsx)(w.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){K()},children:"Inserir Bloco"})}),Z&&(0,a.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,a.jsx)(r.Z,{children:(0,a.jsx)(m.ZP,{container:!0,spacing:4,children:(0,a.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,a.jsx)(p.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",defaultValue:null!=W?W:"",name:"orientacoes",...T("orientacoes"),rows:4,multiline:!0,fullWidth:!0})})})})})]})})},L=()=>{let e=i().query.id;return(0,a.jsxs)(a.Fragment,{children:[1==e&&(0,a.jsx)(_,{}),2==e&&(0,a.jsx)(A,{}),!e&&(0,a.jsx)("div",{children:"Formul\xe1rio n\xe3o encontrado"})]})};var H=L}},function(e){e.O(0,[6668,7536,9774,2888,179],function(){return e(e.s=64876)}),_N_E=e.O()}]);