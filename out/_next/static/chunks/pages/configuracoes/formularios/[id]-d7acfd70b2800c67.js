(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8207],{75158:function(e,t,a){"use strict";a.d(t,{Z:function(){return F}});var n=a(63366),o=a(87462),i=a(67294),c=a(86010),s=a(94780),l=a(41796),r=a(37743),d=a(54235),m=a(85893),u=(0,d.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),b=a(36622),p=a(78884),j=a(67074),Z=a(1588),v=a(34867);function f(e){return(0,v.Z)("MuiCheckbox",e)}let g=(0,Z.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],I=e=>{let{classes:t,indeterminate:a,color:n}=e,i={root:["root",a&&"indeterminate",`color${(0,b.Z)(n)}`]},c=(0,s.Z)(i,f,t);return(0,o.Z)({},t,c)},P=(0,j.ZP)(r.Z,{shouldForwardProp:e=>(0,j.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,"default"!==a.color&&t[`color${(0,b.Z)(a.color)}`]]}})(({theme:e,ownerState:t})=>(0,o.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,l.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${g.checked}, &.${g.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),y=(0,m.jsx)(x,{}),C=(0,m.jsx)(u,{}),D=(0,m.jsx)(h,{}),S=i.forwardRef(function(e,t){var a,s;let l=(0,p.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:r=y,color:d="primary",icon:u=C,indeterminate:x=!1,indeterminateIcon:h=D,inputProps:b,size:j="medium",className:Z}=l,v=(0,n.Z)(l,k),f=x?h:u,g=x?h:r,S=(0,o.Z)({},l,{color:d,indeterminate:x,size:j}),F=I(S);return(0,m.jsx)(P,(0,o.Z)({type:"checkbox",inputProps:(0,o.Z)({"data-indeterminate":x},b),icon:i.cloneElement(f,{fontSize:null!=(a=f.props.fontSize)?a:j}),checkedIcon:i.cloneElement(g,{fontSize:null!=(s=g.props.fontSize)?s:j}),ownerState:S,ref:t,className:(0,c.Z)(F.root,Z)},v,{classes:F}))});var F=S},64876:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/formularios/[id]",function(){return a(98480)}])},89191:function(e,t,a){"use strict";a.d(t,{Z:function(){return I}});var n=a(85893),o=a(11163),i=a.n(o),c=a(67294),s=a(91359),l=a(61953),r=a(75084),d=a(72389),m=a(41664),u=a.n(m),x=a(21609),h=a(46749),b=a(73812),p=a(86378),j=a(9942),Z=a(60565);function v(e){let{disabled:t,dataReports:a,open:o,anchorEl:i,handleClick:s,handleClose:l}=e,{generateReport:r}=(0,c.useContext)(Z.f);return(0,n.jsx)("div",{children:(0,n.jsx)(b.Z,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:i,open:o,onClose:l,TransitionComponent:j.Z,children:a.map(e=>(0,n.jsxs)(p.Z,{onClick(){l(),r(e)},children:[(0,n.jsx)("span",{children:e.identification}),(0,n.jsx)("span",{style:{padding:"0 5px"},children:"-"}),(0,n.jsx)("span",{children:e.name})]},e.id))})})}var f=a(40039),g=a(10160);let k=e=>{let{btnCancel:t,btnSave:a,btnSend:o,btnStatus:m,handleSubmit:b,disabledSubmit:p,handleSend:j,disabledSend:k,handleBtnStatus:I,btnDelete:P,onclickDelete:y,btnPrint:C,disabled:D,dataReports:S}=e,F=i(),{user:V,routes:B}=(0,c.useContext)(f.V),{generateReport:q}=(0,c.useContext)(Z.f),[w,O]=(0,c.useState)(!1),[z,W]=(0,c.useState)(null),E=Boolean(z),R=e=>{W(e.currentTarget)},M=()=>{W(null)},N=(()=>{let e=F.pathname.split("/").slice(0,-1).join("/");return e||F.pathname})(),_=()=>{window.scrollTo({top:0,behavior:"smooth"})},A=()=>{window.history.back()};return(0,c.useEffect)(()=>{let e=()=>{O(!1),window.scrollY>0?O(!0):O(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:"8px"},children:[t&&(0,n.jsx)(u(),{href:(0,h.g_)(F.pathname),children:(0,n.jsx)(r.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,n.jsx)(x.Z,{icon:"material-symbols:arrow-back-rounded"})})}),P&&B.find(e=>e.rota===N&&e.excluir)&&(0,n.jsx)(r.Z,{type:"button",onClick:y,variant:"outlined",color:"error",size:"medium",startIcon:(0,n.jsx)(x.Z,{icon:"material-symbols:delete-outline"}),children:"Excluir"}),m&&(0,n.jsx)(r.Z,{type:"button",onClick:I,variant:"outlined",color:"primary",size:"medium",startIcon:(0,n.jsx)(x.Z,{icon:"fluent:status-12-filled"}),children:"Status"})]}),(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:"8px"},children:[C&&1===S.length&&(0,n.jsx)(r.Z,{id:"fade-button","aria-controls":E?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:()=>q(S[0]),color:"primary",disabled:D,variant:"outlined",size:"medium",type:"button",startIcon:(0,n.jsx)(x.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),C&&S.length>1&&(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(r.Z,{id:"fade-button","aria-controls":E?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,onClick:R,color:"primary",disabled:D,variant:"outlined",size:"medium",type:"button",sx:{mr:0},startIcon:(0,n.jsx)(x.Z,{icon:"material-symbols:print"}),children:"Imprimir"}),(0,n.jsx)(v,{generateReport:q,dataReports:S,handleClick:R,handleClose:M,open:E,anchorEl:z})]}),a&&B.find(e=>e.rota===N&&e.editar)&&(0,n.jsx)(r.Z,{onClick:b,type:"submit",variant:"outlined",size:"medium",color:"primary",disabled:D||p,startIcon:(0,n.jsx)(x.Z,{icon:"material-symbols:save"}),children:"Salvar"}),o&&(0,n.jsx)(r.Z,{onClick:j,type:"button",variant:"contained",size:"medium",color:"primary",disabled:D||k,startIcon:(0,n.jsx)(x.Z,{icon:"carbon:send-filled"}),children:"Concluir Formul\xe1rio"}),(0,n.jsx)("div",{className:"\n                        ".concat(w?"fadeIn":"hidden"," trasition duration-200 fixed bottom-10 right-8 z-50 flex flex-col-reverse gap-3\n                    "),children:[{id:1,title:"Salvar",color:"primary",size:"large",type:"submit",variant:"contained",disabled:D||p,icon:"material-symbols:save",function:b},{id:2,title:"Imprimir",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"material-symbols:print",function:R},{id:3,title:"Voltar ao topo",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"ion:arrow-up",function:_},{id:4,title:"Voltar para a p\xe1gina anterior",color:"default",size:"large",type:"button",variant:"outlined",disabled:!1,icon:"material-symbols:arrow-back-rounded",function:A}].map(e=>(1!==e.id||a&&B.find(e=>e.rota===N&&e.editar))&&(2!==e.id||C)?(0,n.jsx)(d.Z,{title:e.title,placement:"left",children:(0,n.jsx)("div",{children:(0,n.jsx)(g.Z,{color:e.color,size:"large",onClick:e.function,variant:"contained",type:e.type,disabled:e.disabled,children:(0,n.jsx)(x.Z,{icon:e.icon})})},e.id)},e.id):null)})]})]})})};var I=k},47842:function(e,t,a){"use strict";var n=a(85893),o=a(70754),i=a(61953);let c=()=>(0,n.jsx)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%"},children:(0,n.jsx)(o.Z,{})});t.Z=c},98480:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var n=a(85893),o=a(11163),i=a.n(o),c=a(67294),s=a(87536),l=a(49837),r=a(91359),d=a(85214),m=a(79072),u=a(81284),x=a(95309),h=a(29630),b=a(75158),p=a(67836),j=a(55343),Z=a(19604),v=a(22841),f=a(35966),g=a(75084),k=a(72389),I=a(80562),P=a(46749),y=a(60664),C=a(89191),D=a(60565),S=a(40039),F=a(86501),V=a(47842),B=a(21609),q=a(29620),w=a(77745),O=a(95398),z=a(76779),W=a(44642),E=a(61953),R=a(22416),M=a(16056);let N=e=>{let{openModal:t,setOpenModalConfirmScore:a,itemScore:o,setItemScore:i}=e,c=()=>{a(!1)},{handleSubmit:l,register:r}=(0,s.cI)({}),d=e=>{let t={alternativaID:null==o?void 0:o.alternativaID,pontuacao:(null==e?void 0:e.pontuacao)?1:0,parFornecedorBlocoItemID:null==o?void 0:o.parFornecedorBlocoItemID,alternatives:null==o?void 0:o.alternatives.map((t,a)=>({alternativaItemID:null==t?void 0:t.alternativaItemID,score:e[null==t?void 0:t.nome]}))};y.h.post("/formularios/fornecedor/saveItemScore",{data:t}).then(e=>{a(!1),F.Am.success("Pontua\xe7\xe3o salva com sucesso!")})};return(0,n.jsx)(n.Fragment,{children:(null==o?void 0:o.alternatives)&&(0,n.jsx)(q.Z,{open:t,onClose:c,"aria-labelledby":"form-dialog-title",children:(0,n.jsxs)("form",{onSubmit:l(d),children:[(0,n.jsx)(w.Z,{id:"form-dialog-title",children:"Pontua\xe7\xe3o das respostas"}),(0,n.jsxs)(O.Z,{children:[(0,n.jsx)(W.Z,{sx:{mb:3},children:"Defina a pontua\xe7\xe3o para cada alternativa"}),(0,n.jsx)(E.Z,{sx:{mb:4},children:(0,n.jsx)(R.Z,{row:!0,children:(0,n.jsx)(v.Z,{label:"Habilitar pontua\xe7\xe3o",control:(0,n.jsx)(M.Z,{name:"pontuacao",...r("pontuacao"),checked:(null==o?void 0:o.pontuacao)==1,onChange(e){i({...o,pontuacao:e.target.checked?1:0})}})})})}),o&&(null==o?void 0:o.alternatives.map((e,t)=>(0,n.jsx)(m.ZP,{md:12,sx:{mb:4},children:(0,n.jsx)("grid",{item:!0,md:12,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(p.Z,{disabled:1!=o.pontuacao,id:"outlined-basic",label:null==e?void 0:e.nome,...r("".concat(null==e?void 0:e.nome)),name:"".concat(null==e?void 0:e.nome),defaultValue:null==e?void 0:e.score,variant:"outlined",size:"small",type:"number",title:0!=o.pontuacao||"Habilite a pontua\xe7\xe3o para preencher"})})})},t)))]}),(0,n.jsxs)(z.Z,{className:"dialog-actions-dense",children:[(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",onClick:c,children:"Cancelar"}),(0,n.jsx)(g.Z,{variant:"contained",color:"primary",onClick:l(d),children:"Confirmar"})]})]})})})},_=()=>{var e,t,a;let{user:o,loggedUnity:q}=(0,c.useContext)(S.V),[w,O]=(0,c.useState)(),[z,W]=(0,c.useState)([]),[E,R]=(0,c.useState)(),[M,_]=(0,c.useState)(),[A,L]=(0,c.useState)(!1),[H,$]=(0,c.useState)(),[T,U]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),G=i(),J=(0,P.g_)(G.pathname),{setTitle:K}=(0,c.useContext)(D.f),{setValue:Q,register:ee,handleSubmit:et,formState:{errors:ea}}=(0,s.cI)(),en=async e=>{let t={unidadeID:q.unidadeID,header:e.headers,blocks:e.blocks,orientacoes:e.orientacoes};console.log("\uD83D\uDE80 ~ onSubmit:",t);try{await y.h.put("".concat(J,"/fornecedor/updateData"),t).then(e=>{F.ZP.success(P.OD.successUpdate),Y(!X)})}catch(a){console.log(a)}},eo=e=>{let t=[...E];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),R(t)},ei=(e,t,a)=>{e.removed=!0,Q("blocks.[".concat(t,"].itens.[").concat(a,"].removed"),!0),document.getElementById("item-".concat(t,"-").concat(a)).style.display="none",F.ZP.success("Item pr\xe9 removido, salve para concluir!"),console.log("\uD83D\uDE80 item:",e)},ec=e=>{$(null),y.h.post("/formularios/fornecedor/getItemScore",{data:e}).then(e=>{$(e.data)}),$&&L(!0)},es=()=>{let e=[...E];e.push({dados:{ordem:e.length+1,nome:"",status:1},atividades:[...E[0].atividades.map(e=>({...e,checked:0}))],categorias:[...E[0].categorias.map(e=>({...e,checked:0}))],itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),R(e)},el=e=>{e.blocks.map((e,t)=>{e.itens.map((e,a)=>{e&&(Q("blocks.[".concat(t,"].itens.[").concat(a,"].item"),e.item),Q("blocks.[".concat(t,"].itens.[").concat(a,"].alternativa"),e.alternativa))})})},er=()=>{try{U(!0),y.h.post("".concat(J,"/fornecedor/getData"),{unidadeID:q.unidadeID}).then(e=>{console.log("getData: ",e.data),O(e.data.header),R(e.data.blocks),W(e.data.options),_(e.data.orientations),el(e.data),U(!1)})}catch(e){console.log(e)}};return(0,c.useEffect)(()=>{K("Formul\xe1rio do Fornecedor"),console.log("useEffect chamando getData..."),er()},[X]),(0,n.jsx)(n.Fragment,{children:T?(0,n.jsx)(V.Z,{}):(0,n.jsxs)("form",{onSubmit:et(en),children:[w&&(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>et(en)}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(m.ZP,{item:!0,md:4,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),w.map((e,t)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parFornecedorID"),defaultValue:e.parFornecedorID,...ee("headers.[".concat(t,"].parFornecedorID"))}),(0,n.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...ee("headers.[".concat(t,"].mostra")),defaultChecked:1==w[t].mostra})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...ee("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==w[t].obrigatorio})})]})},t)}))]})})})]}),!E&&(0,n.jsx)(V.Z,{}),E&&E.map((a,o)=>(0,n.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].parFornecedorBlocoID"),defaultValue:a.dados.parFornecedorBlocoID,...ee("blocks.[".concat(o,"].parFornecedorBlocoID"))}),(0,n.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,n.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].sequencia"),defaultValue:a.dados.ordem,...ee("blocks.[".concat(o,"].sequencia"))})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(p.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(o,"].nome"),defaultValue:a.dados.nome,...ee("blocks.[".concat(o,"].nome"))})})}),(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,n.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].status"),...ee("blocks.[".concat(o,"].status")),defaultChecked:1==E[o].dados.status})]}),(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,n.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].obs"),...ee("blocks.[".concat(o,"].obs")),defaultChecked:1==E[o].dados.obs})]})]}),(0,n.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:2},children:(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(Z.Z,{severity:"info",children:"Esse bloco ser\xe1 habilitado para o Fornecedor se satisfazer as condi\xe7\xf5es abaixo:"})})}),(0,n.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:3,children:[(0,n.jsx)(u.ZP,{disablePadding:!0,children:(0,n.jsx)(x.Z,{children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco quando \xe9:"})})}),a.categorias&&a.categorias.map((e,t)=>(0,n.jsx)(u.ZP,{disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].categorias[").concat(t,"].categoriaID"),defaultValue:e.categoriaID,...ee("blocks.[".concat(o,"].categorias[").concat(t,"].categoriaID"))}),(0,n.jsx)(v.Z,{control:(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].categorias[").concat(t,"].checked"),...ee("blocks.[".concat(o,"].categorias[").concat(t,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},t))]}),(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:4,children:[(0,n.jsx)(u.ZP,{disablePadding:!0,children:(0,n.jsx)(x.Z,{children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco se atividade for:"})})}),a.atividades&&a.atividades.map((e,t)=>(0,n.jsx)(u.ZP,{disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].atividades[").concat(t,"].atividadeID"),defaultValue:e.atividadeID,...ee("blocks.[".concat(o,"].atividades[").concat(t,"].atividadeID"))}),(0,n.jsx)(v.Z,{control:(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].atividades[").concat(t,"].checked"),...ee("blocks.[".concat(o,"].atividades[").concat(t,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},t))]})]}),a.itens&&a.itens.map((a,i)=>(0,n.jsxs)(m.ZP,{id:"item-".concat(o,"-").concat(i),container:!0,spacing:4,sx:{mt:4},children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].itens.[").concat(i,"].parFornecedorBlocoItemID"),defaultValue:a.parFornecedorBlocoItemID,...ee("blocks.[".concat(o,"].itens.[").concat(i,"].parFornecedorBlocoItemID"))}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"right"},children:(0,n.jsx)(j.Z,{children:(0,n.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),defaultValue:a.ordem,...ee("blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"))})})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:""!==E[o].itens[i].nome&&(0,n.jsx)(f.Z,{options:z.itens,getOptionLabel:e=>e.nome||"",defaultValue:null!==(e=E[o].itens[i].item)&&void 0!==e?e:{nome:""},disabled:1==a.hasPending||0==a.status,name:"blocks.[".concat(o,"].itens.[").concat(i,"].item"),...ee("blocks.[".concat(o,"].itens.[").concat(i,"].item"),{required:!0}),onChange(e,t){Q("blocks.[".concat(o,"].itens.[").concat(i,"].item"),null!=t?t:null)},renderInput(e){var t,c,s;return(0,n.jsx)(p.Z,{...e,label:a.itemID?"Item [".concat(a.itemID,"]"):"Item",placeholder:a.itemID?"Item [".concat(a.itemID,"]"):"Item",error:null===(s=null==ea?void 0:null===(t=ea.blocks)||void 0===t?void 0:null===(c=t[o])||void 0===c?void 0:c.itens[i])||void 0===s?void 0:s.item})}})})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(f.Z,{options:z.alternativas,getOptionLabel:e=>e.nome||"",defaultValue:null!==(t=E[o].itens[i].alternativa)&&void 0!==t?t:{nome:""},disabled:1==a.hasPending||0==a.status,name:"blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),...ee("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),{required:!0}),onChange(e,t){Q("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),null!=t?t:null)},renderInput(e){var t,a,c;return(0,n.jsx)(p.Z,{...e,label:"Alternativa",placeholder:"Alternativa",error:null===(c=null==ea?void 0:null===(t=ea.blocks)||void 0===t?void 0:null===(a=t[o])||void 0===a?void 0:a.itens[i])||void 0===c?void 0:c.alternativa})}})})}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Ativo":""}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].status"),...ee("blocks.[".concat(o,"].itens.[").concat(i,"].status")),defaultChecked:1==a.status})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Obs":""}),(0,n.jsx)(b.Z,{disabled:0==a.status,name:"blocks.[".concat(o,"][").concat(i,"].obs"),...ee("blocks.[".concat(o,"].itens.[").concat(i,"].obs")),defaultChecked:1==a.obs})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Obrigat\xf3rio":""}),(0,n.jsx)(b.Z,{disabled:0==a.status,name:"blocks.[".concat(o,"][").concat(i,"].obrigatorio"),...ee("blocks.[".concat(o,"].itens.[").concat(i,"].obrigatorio")),defaultChecked:1==a.obrigatorio})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Pontua\xe7\xe3o":""}),(0,n.jsx)(g.Z,{style:0===a.pontuacao?{opacity:.3}:{},title:a.parFornecedorBlocoID?"Definir pontua\xe7\xe3o para as respostas":"Salve o bloco para definir a pontua\xe7\xe3o",disabled:!a.parFornecedorBlocoID,onClick:()=>ec(a),children:(0,n.jsx)(B.Z,{icon:"ic:baseline-assessment"})})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Remover":""}),(0,n.jsx)(k.Z,{title:1==a.hasPending?"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio":"Remover este item",children:(0,n.jsx)(I.Z,{color:"error",onClick(){1==a.hasPending||ei(a,o,i)},sx:{opacity:1==a.hasPending?.5:1,cursor:1==a.hasPending?"default":"pointer"},children:(0,n.jsx)(B.Z,{icon:"tabler:trash-filled"})})})]})]},i)),A&&H&&(0,n.jsx)(N,{openModal:A,setOpenModalConfirmScore:L,itemScore:H,setItemScore:$}),(0,n.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:4},children:(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(B.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){eo(o)},children:"Inserir Item"})})})]})},o)),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(B.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){es()},children:"Inserir Bloco"})}),(0,n.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,n.jsx)(r.Z,{children:(0,n.jsx)(m.ZP,{container:!0,spacing:4,children:(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(p.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",rows:4,multiline:!0,fullWidth:!0,name:"orientacoes",defaultValue:null!==(a=null==M?void 0:M.obs)&&void 0!==a?a:"",...ee("orientacoes")})})})})})]})})},A=()=>{var e,t;let{user:a,loggedUnity:o}=(0,c.useContext)(S.V),[Z,v]=(0,c.useState)(),[k,I]=(0,c.useState)(),[q,w]=(0,c.useState)(null),[O,z]=(0,c.useState)([]),[W,E]=(0,c.useState)(null),[R,M]=(0,c.useState)(!1),[N,_]=(0,c.useState)(!1),A=i(),L=(0,P.g_)(A.pathname),{setTitle:H}=(0,c.useContext)(D.f),{setValue:$,register:T,handleSubmit:U,formState:{errors:X}}=(0,s.cI)(),Y=e=>{e.blocks.map((e,t)=>{e.itens.map((e,a)=>{e&&($("blocks.[".concat(t,"].itens.[").concat(a,"].item"),e.item),$("blocks.[".concat(t,"].itens.[").concat(a,"].alternativa"),e.alternativa))})})},G=async e=>{let t={unidadeID:o.unidadeID,header:e.headers,products:e.products,blocks:e.blocks,orientacoes:e.orientacoes};console.log("onSubmit: ",t);try{await y.h.put("".concat(L,"/recebimentoMp/updateData"),t).then(e=>{F.ZP.success(P.OD.successUpdate),M(!R)})}catch(a){console.log(a)}},J=e=>{let t=[...O];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),z(t)},K=()=>{let e=[...O];e.push({dados:{ordem:e.length+1,nome:"",status:1},itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),z(e)},Q=()=>{try{_(!0),y.h.post("".concat(L,"/recebimentoMp/getData"),{unidadeID:o.unidadeID}).then(e=>{console.log("getData: ",e.data),v(e.data.header),I(e.data.products),z(e.data.blocks),E(e.data.orientacoes.obs),w(e.data.options),Y(e.data),_(!1)})}catch(e){console.log(e)}};return(0,c.useEffect)(()=>{console.log("no useEffect savingForm"),H("Formul\xe1rio do Recebimento de MP"),Q()},[R]),console.log("errors: ",X),(0,n.jsx)(n.Fragment,{children:N?(0,n.jsx)(V.Z,{}):(0,n.jsxs)("form",{onSubmit:U(G),children:[Z&&(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>U(G)}),(0,n.jsx)(r.Z,{children:(0,n.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(m.ZP,{item:!0,md:4,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),Z.map((e,t)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parRecebimentompID"),defaultValue:e.parRecebimentompID,...T("headers.[".concat(t,"].parRecebimentompID"))}),(0,n.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...T("headers.[".concat(t,"].mostra")),defaultChecked:1==Z[t].mostra})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...T("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==Z[t].obrigatorio})})]})},t)}))]})})})]}),k&&(0,n.jsx)(l.Z,{sx:{mt:4},children:(0,n.jsx)(r.Z,{children:(0,n.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(m.ZP,{item:!0,md:4,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),k.map((e,t)=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"products.[".concat(t,"].parRecebimentoMpProdutoID"),defaultValue:e.parRecebimentompProdutoID,...T("products.[".concat(t,"].parRecebimentoMpProdutoID"))}),(0,n.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"products.[".concat(t,"].mostra"),...T("products.[".concat(t,"].mostra")),defaultChecked:1==k[t].mostra})}),(0,n.jsx)(m.ZP,{item:!0,md:3,children:(0,n.jsx)(b.Z,{name:"products.[".concat(t,"].obrigatorio"),...T("products.[".concat(t,"].obrigatorio")),defaultChecked:1==k[t].obrigatorio})})]})},t)}))]})})})}),O&&O.map((a,o)=>{var i,c,s,d;return(0,n.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,n.jsxs)(r.Z,{children:[(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:4},children:"Bloco ".concat(o+1)}),(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].parRecebimentompBlocoID"),defaultValue:a.dados.parRecebimentompBlocoID,...T("blocks.[".concat(o,"].parRecebimentompBlocoID"))}),(0,n.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,n.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].sequencia"),defaultValue:a.dados.ordem,...T("blocks.[".concat(o,"].sequencia"),{required:!0}),error:null!=X&&null!==(i=X.blocks)&&void 0!==i&&null!==(c=i[o])&&void 0!==c&&!!c.sequencia})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(p.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(o,"].nome"),defaultValue:a.dados.nome,...T("blocks.[".concat(o,"].nome"),{required:!0}),error:null!=X&&null!==(s=X.blocks)&&void 0!==s&&null!==(d=s[o])&&void 0!==d&&!!d.nome})})}),(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].status"),...T("blocks.[".concat(o,"].status")),defaultChecked:1==O[o].dados.status})]}),(0,n.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"].obs"),...T("blocks.[".concat(o,"].obs")),defaultChecked:1==O[o].dados.obs})]})]}),(0,n.jsxs)(m.ZP,{container:!0,spacing:4,sx:{mt:0},children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Itens"})}),a.itens&&a.itens.map((a,i)=>{var c,s,l,r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(o,"].itens.[").concat(i,"].parRecebimentompBlocoItemID"),defaultValue:a.parRecebimentompBlocoItemID,...T("blocks.[".concat(o,"].itens.[").concat(i,"].parRecebimentompBlocoItemID"))}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(p.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),disabled:0==a.status,defaultValue:a.ordem,...T("blocks.[".concat(o,"].itens.[").concat(i,"].sequencia"),{required:!0}),error:null!=X&&null!==(c=X.blocks)&&void 0!==c&&null!==(s=c[o])&&void 0!==s&&null!==(l=s.itens)&&void 0!==l&&null!==(r=l[i])&&void 0!==r&&!!r.sequencia})})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(f.Z,{options:q.itens,getOptionLabel:e=>e.nome||"",disabled:0==a.status,defaultValue:null!==(e=O[o].itens[i].item)&&void 0!==e?e:{nome:""},name:"blocks.[".concat(o,"].itens.[").concat(i,"].item"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].item"),{required:!0}),onChange(e,t){$("blocks.[".concat(o,"].itens.[").concat(i,"].item"),null!=t?t:null)},renderInput(e){var t,c,s;return(0,n.jsx)(p.Z,{...e,label:a.itemID>0?"Item [".concat(a.itemID,"]"):"Item",placeholder:a.itemID>0?"Item [".concat(a.itemID,"]"):"Item",error:null===(s=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(c=t[o])||void 0===c?void 0:c.itens[i])||void 0===s?void 0:s.item})}})})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,n.jsx)(j.Z,{fullWidth:!0,children:(0,n.jsx)(f.Z,{options:q.alternativas,getOptionLabel:e=>e.nome||"",disabled:0==a.status,defaultValue:null!==(t=O[o].itens[i].alternativa)&&void 0!==t?t:{nome:""},name:"blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),{required:!0}),onChange(e,t){$("blocks.[".concat(o,"].itens.[").concat(i,"].alternativa"),null!=t?t:null)},renderInput(e){var t,a,c;return(0,n.jsx)(p.Z,{...e,label:"Alternativa",placeholder:"Alternativa",error:null===(c=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(a=t[o])||void 0===a?void 0:a.itens[i])||void 0===c?void 0:c.alternativa})}})})}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Ativo":""}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].status"),...T("blocks.[".concat(o,"].itens.[").concat(i,"].status")),defaultChecked:1==a.status})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Obs":""}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].obs"),disabled:0==a.status,...T("blocks.[".concat(o,"].itens.[").concat(i,"].obs")),defaultChecked:1==a.obs})]}),(0,n.jsxs)(m.ZP,{item:!0,md:1,children:[(0,n.jsx)(h.Z,{variant:"body2",children:0==i?"Obrigat\xf3rio":""}),(0,n.jsx)(b.Z,{name:"blocks.[".concat(o,"][").concat(i,"].obrigatorio"),disabled:0==a.status,...T("blocks.[".concat(o,"].itens.[").concat(i,"].obrigatorio")),defaultChecked:1==a.obrigatorio})]})]})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(B.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){J(o)},children:"Inserir Item"})})]})]})},o)}),(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,n.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(B.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){K()},children:"Inserir Bloco"})}),Z&&(0,n.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,n.jsx)(r.Z,{children:(0,n.jsx)(m.ZP,{container:!0,spacing:4,children:(0,n.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(p.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",defaultValue:null!=W?W:"",name:"orientacoes",...T("orientacoes"),rows:4,multiline:!0,fullWidth:!0})})})})})]})})},L=()=>{let e=i().query.id;return(0,n.jsxs)(n.Fragment,{children:[1==e&&(0,n.jsx)(_,{}),2==e&&(0,n.jsx)(A,{}),!e&&(0,n.jsx)("div",{children:"Formul\xe1rio n\xe3o encontrado"})]})};var H=L}},function(e){e.O(0,[6668,7536,9774,2888,179],function(){return e(e.s=64876)}),_N_E=e.O()}]);