(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8207],{75158:function(e,t,a){"use strict";a.d(t,{Z:function(){return F}});var o=a(63366),n=a(87462),c=a(67294),i=a(86010),s=a(94780),l=a(41796),r=a(37743),d=a(54235),m=a(85893),u=(0,d.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),b=a(36622),j=a(78884),Z=a(67074),p=a(1588),v=a(34867);function f(e){return(0,v.Z)("MuiCheckbox",e)}let g=(0,p.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],P=e=>{let{classes:t,indeterminate:a,color:o}=e,c={root:["root",a&&"indeterminate",`color${(0,b.Z)(o)}`]},i=(0,s.Z)(c,f,t);return(0,n.Z)({},t,i)},I=(0,Z.ZP)(r.Z,{shouldForwardProp:e=>(0,Z.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver(e,t){let{ownerState:a}=e;return[t.root,a.indeterminate&&t.indeterminate,"default"!==a.color&&t[`color${(0,b.Z)(a.color)}`]]}})(({theme:e,ownerState:t})=>(0,n.Z)({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${"default"===t.color?e.vars.palette.action.activeChannel:e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,l.Fq)("default"===t.color?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==t.color&&{[`&.${g.checked}, &.${g.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),D=(0,m.jsx)(x,{}),C=(0,m.jsx)(u,{}),y=(0,m.jsx)(h,{}),S=c.forwardRef(function(e,t){var a,s;let l=(0,j.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:r=D,color:d="primary",icon:u=C,indeterminate:x=!1,indeterminateIcon:h=y,inputProps:b,size:Z="medium",className:p}=l,v=(0,o.Z)(l,k),f=x?h:u,g=x?h:r,S=(0,n.Z)({},l,{color:d,indeterminate:x,size:Z}),F=P(S);return(0,m.jsx)(I,(0,n.Z)({type:"checkbox",inputProps:(0,n.Z)({"data-indeterminate":x},b),icon:c.cloneElement(f,{fontSize:null!=(a=f.props.fontSize)?a:Z}),checkedIcon:c.cloneElement(g,{fontSize:null!=(s=g.props.fontSize)?s:Z}),ownerState:S,ref:t,className:(0,i.Z)(F.root,p)},v,{classes:F}))});var F=S},64876:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/formularios/[id]",function(){return a(98480)}])},47842:function(e,t,a){"use strict";var o=a(85893),n=a(70754),c=a(61953);let i=()=>(0,o.jsx)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%"},children:(0,o.jsx)(n.Z,{})});t.Z=i},98480:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});var o=a(85893),n=a(11163),c=a.n(n),i=a(67294),s=a(87536),l=a(49837),r=a(91359),d=a(85214),m=a(79072),u=a(81284),x=a(95309),h=a(29630),b=a(75158),j=a(67836),Z=a(55343),p=a(19604),v=a(22841),f=a(35966),g=a(75084),k=a(72389),P=a(80562),I=a(46749),D=a(60664),C=a(89191),y=a(60565),S=a(40039),F=a(86501),B=a(47842),O=a(21609),V=a(29620),q=a(77745),W=a(95398),M=a(76779),R=a(44642),N=a(61953),w=a(22416),E=a(16056);let _=e=>{let{openModal:t,setOpenModalConfirmScore:a,itemScore:n,setItemScore:c,getBlocks:i}=e,l=()=>{a(!1)},{handleSubmit:r,register:d}=(0,s.cI)({}),u=e=>{let t={alternativaID:null==n?void 0:n.alternativaID,pontuacao:(null==e?void 0:e.pontuacao)?1:0,parFornecedorBlocoItemID:null==n?void 0:n.parFornecedorBlocoItemID,alternatives:null==n?void 0:n.alternatives.map((t,a)=>({alternativaItemID:null==t?void 0:t.alternativaItemID,score:e[null==t?void 0:t.nome]}))};D.h.post("/formularios/fornecedor/saveItemScore",{data:t}).then(e=>{a(!1),i(),F.Am.success("Pontua\xe7\xe3o salva com sucesso!")})};return(0,o.jsx)(o.Fragment,{children:(null==n?void 0:n.alternatives)&&(0,o.jsx)(V.Z,{open:t,onClose:l,"aria-labelledby":"form-dialog-title",children:(0,o.jsxs)("form",{onSubmit:r(u),children:[(0,o.jsx)(q.Z,{id:"form-dialog-title",children:"Pontua\xe7\xe3o das respostas"}),(0,o.jsxs)(W.Z,{children:[(0,o.jsx)(R.Z,{sx:{mb:3},children:"Defina a pontua\xe7\xe3o para cada alternativa"}),(0,o.jsx)(N.Z,{sx:{mb:4},children:(0,o.jsx)(w.Z,{row:!0,children:(0,o.jsx)(v.Z,{label:"Habilitar pontua\xe7\xe3o",control:(0,o.jsx)(E.Z,{name:"pontuacao",...d("pontuacao"),checked:(null==n?void 0:n.pontuacao)==1,onChange(e){c({...n,pontuacao:e.target.checked?1:0})}})})})}),n&&(null==n?void 0:n.alternatives.map((e,t)=>(0,o.jsx)(m.ZP,{md:12,sx:{mb:4},children:(0,o.jsx)("grid",{item:!0,md:12,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(j.Z,{disabled:1!=n.pontuacao,id:"outlined-basic",label:null==e?void 0:e.nome,...d("".concat(null==e?void 0:e.nome)),name:"".concat(null==e?void 0:e.nome),defaultValue:null==e?void 0:e.score,variant:"outlined",size:"small",type:"number",title:0!=n.pontuacao||"Habilite a pontua\xe7\xe3o para preencher"})})})},t)))]}),(0,o.jsxs)(M.Z,{className:"dialog-actions-dense",children:[(0,o.jsx)(g.Z,{variant:"outlined",color:"primary",onClick:l,children:"Cancelar"}),(0,o.jsx)(g.Z,{variant:"contained",color:"primary",onClick:r(u),children:"Confirmar"})]})]})})})},z=()=>{var e;let{user:t,loggedUnity:a}=(0,i.useContext)(S.V),[n,V]=(0,i.useState)(),[q,W]=(0,i.useState)([]),[M,R]=(0,i.useState)(),[N,w]=(0,i.useState)(),[E,z]=(0,i.useState)(!1),[A,H]=(0,i.useState)(),$=c(),L=(0,I.g_)($.pathname),{setTitle:T}=(0,i.useContext)(y.f),{setValue:U,register:X,handleSubmit:G,formState:{errors:J}}=(0,s.cI)(),K=async e=>{let t={header:e.headers,blocks:e.blocks,orientacoes:e.orientacoes};try{console.log("onSubmit: ",t),await D.h.put("".concat(L,"/fornecedor/").concat(a.unidadeID),t).then(e=>{F.ZP.success(I.OD.successUpdate)})}catch(o){console.log(o)}},Q=e=>{let t=[...M];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),R(t)},Y=(e,t,a)=>{e.removed=!0,U("blocks.[".concat(t,"].itens.[").concat(a,"].removed"),!0),document.getElementById("item-".concat(t,"-").concat(a)).style.display="none",F.ZP.success("Item pr\xe9 removido, salve para concluir!"),console.log("\uD83D\uDE80 item:",e)},ee=e=>{H(null),D.h.post("/formularios/fornecedor/getItemScore",{data:e}).then(e=>{H(e.data)}),H&&z(!0)},et=()=>{let e=[...M];e.push({dados:{ordem:e.length+1,nome:"",status:1},atividades:[...M[0].atividades.map(e=>({...e,checked:0}))],categorias:[...M[0].categorias.map(e=>({...e,checked:0}))],itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),R(e)},ea=()=>{D.h.get("".concat(L,"/fornecedor/").concat(a.unidadeID),{headers:{"function-name":"getBlocks"}}).then(e=>{console.log("getBlocks: ",e.data),R(e.data)})},eo=()=>{D.h.get("".concat(L,"/fornecedor/").concat(a.unidadeID),{headers:{"function-name":"getHeader"}}).then(e=>{console.log("getHeader: ",e.data),V(e.data)})},en=()=>{D.h.get("".concat(L,"/fornecedor/").concat(a.unidadeID),{headers:{"function-name":"getOptionsItens"}}).then(e=>{console.log("getOptionsItens: ",e.data),W(e.data)})};return(0,i.useEffect)(()=>{T("Formul\xe1rio do Fornecedor"),eo(),en(),ea()},[]),console.log("blocks: ",M),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{onSubmit:G(K),children:[n&&(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>G(K)}),(0,o.jsx)(r.Z,{children:(0,o.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,o.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(m.ZP,{item:!0,md:4,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),n.map((e,t)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parFornecedorID"),defaultValue:e.parFornecedorID,...X("headers.[".concat(t,"].parFornecedorID"))}),(0,o.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...X("headers.[".concat(t,"].mostra")),defaultChecked:1==n[t].mostra})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...X("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==n[t].obrigatorio})})]})},t)}))]})})})]}),!M&&(0,o.jsx)(B.Z,{}),M&&M.map((e,t)=>(0,o.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,o.jsxs)(r.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(t,"].parFornecedorBlocoID"),defaultValue:e.dados.parFornecedorBlocoID,...X("blocks.[".concat(t,"].parFornecedorBlocoID"))}),(0,o.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,o.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,o.jsx)(j.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(t,"].sequencia"),defaultValue:e.dados.ordem,...X("blocks.[".concat(t,"].sequencia"))})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(j.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(t,"].nome"),defaultValue:e.dados.nome,...X("blocks.[".concat(t,"].nome"))})})}),(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,o.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"].status"),...X("blocks.[".concat(t,"].status")),defaultChecked:1==M[t].dados.status})]}),(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:2,children:[(0,o.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"].obs"),...X("blocks.[".concat(t,"].obs")),defaultChecked:1==M[t].dados.obs})]})]}),(0,o.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:2},children:(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(p.Z,{severity:"info",children:"Esse bloco ser\xe1 habilitado para o Fornecedor se satisfazer as condi\xe7\xf5es abaixo:"})})}),(0,o.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:3,children:[(0,o.jsx)(u.ZP,{disablePadding:!0,children:(0,o.jsx)(x.Z,{children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco quando \xe9:"})})}),e.categorias&&e.categorias.map((e,a)=>(0,o.jsx)(u.ZP,{disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(t,"].categorias[").concat(a,"].categoriaID"),defaultValue:e.categoriaID,...X("blocks.[".concat(t,"].categorias[").concat(a,"].categoriaID"))}),(0,o.jsx)(v.Z,{control:(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"].categorias[").concat(a,"].checked"),...X("blocks.[".concat(t,"].categorias[").concat(a,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},a))]}),(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:4,children:[(0,o.jsx)(u.ZP,{disablePadding:!0,children:(0,o.jsx)(x.Z,{children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostrar esse bloco se atividade for:"})})}),e.atividades&&e.atividades.map((e,a)=>(0,o.jsx)(u.ZP,{disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(t,"].atividades[").concat(a,"].atividadeID"),defaultValue:e.atividadeID,...X("blocks.[".concat(t,"].atividades[").concat(a,"].atividadeID"))}),(0,o.jsx)(v.Z,{control:(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"].atividades[").concat(a,"].checked"),...X("blocks.[".concat(t,"].atividades[").concat(a,"].checked")),defaultChecked:1==e.checked}),label:e.nome})]})},a))]})]}),e.itens&&e.itens.map((e,a)=>(0,o.jsxs)(m.ZP,{id:"item-".concat(t,"-").concat(a),container:!0,spacing:4,sx:{mt:4},children:[(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(t,"].itens.[").concat(a,"].parFornecedorBlocoItemID"),defaultValue:e.parFornecedorBlocoItemID,...X("blocks.[".concat(t,"].itens.[").concat(a,"].parFornecedorBlocoItemID"))}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:1,sx:{textAlign:"right"},children:(0,o.jsx)(Z.Z,{children:(0,o.jsx)(j.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(t,"].itens.[").concat(a,"].sequencia"),defaultValue:e.ordem,...X("blocks.[".concat(t,"].itens.[").concat(a,"].sequencia"))})})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:4,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:""!==M[t].itens[a].nome&&(0,o.jsx)(f.Z,{options:q.itens,defaultValue:M[t].itens[a],id:"autocomplete-outlined",getOptionLabel:e=>e.nome||"",disabled:1==e.hasPending,onChange(e,o){U("blocks.[".concat(t,"].itens.[").concat(a,"].itemID"),null==o?void 0:o.itemID)},renderInput:n=>(0,o.jsx)(j.Z,{...n,name:"blocks.[".concat(t,"].itens.[").concat(a,"].nome"),label:e.itemID?"Item [".concat(e.itemID,"]"):"Item",placeholder:e.itemID?"Item [".concat(e.itemID,"]"):"Item",...X("blocks.[".concat(t,"].itens.[").concat(a,"].nome"))})})})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(f.Z,{options:q.alternativas,defaultValue:M[t].itens[a],id:"autocomplete-outlined",getOptionLabel:e=>e.alternativa||"",disabled:1==e.hasPending,onChange(e,o){U("blocks.[".concat(t,"].itens.[").concat(a,"].alternativaID"),null==o?void 0:o.alternativaID)},renderInput:e=>(0,o.jsx)(j.Z,{...e,name:"blocks.[".concat(t,"].itens.[").concat(a,"].alternativa"),label:"Alternativa",placeholder:"Alternativa",...X("blocks.[".concat(t,"].itens.[").concat(a,"].alternativa"))})})})}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==a?"Ativo":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"][").concat(a,"].status"),...X("blocks.[".concat(t,"].itens.[").concat(a,"].status")),defaultChecked:1==e.status})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==a?"Obs":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"][").concat(a,"].obs"),disabled:0==e.status,...X("blocks.[".concat(t,"].itens.[").concat(a,"].obs")),defaultChecked:1==e.obs})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==a?"Obrigat\xf3rio":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(t,"][").concat(a,"].obrigatorio"),...X("blocks.[".concat(t,"].itens.[").concat(a,"].obrigatorio")),defaultChecked:1==e.obrigatorio})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==a?"Pontua\xe7\xe3o":""}),(0,o.jsx)(g.Z,{style:0===e.pontuacao?{opacity:.3}:{},title:e.parFornecedorBlocoID?"Definir pontua\xe7\xe3o para as respostas":"Salve o bloco para definir a pontua\xe7\xe3o",disabled:!e.parFornecedorBlocoID,onClick:()=>ee(e),children:(0,o.jsx)(O.Z,{icon:"ic:baseline-assessment"})})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==a?"Remover":""}),(0,o.jsx)(k.Z,{title:1==e.hasPending?"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio":"Remover este item",children:(0,o.jsx)(P.Z,{color:"error",onClick(){1==e.hasPending||Y(e,t,a)},sx:{opacity:1==e.hasPending?.5:1,cursor:1==e.hasPending?"default":"pointer"},children:(0,o.jsx)(O.Z,{icon:"tabler:trash-filled"})})})]})]},a)),E&&A&&(0,o.jsx)(_,{openModal:E,setOpenModalConfirmScore:z,itemScore:A,setItemScore:H,getBlocks:ea}),(0,o.jsx)(m.ZP,{container:!0,spacing:4,sx:{mt:4},children:(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,o.jsx)(O.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){Q(t)},children:"Inserir Item"})})})]})},t)),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,o.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,o.jsx)(O.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){et()},children:"Inserir Bloco"})}),(0,o.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,o.jsx)(r.Z,{children:(0,o.jsx)(m.ZP,{container:!0,spacing:4,children:(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(j.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",rows:4,multiline:!0,fullWidth:!0,name:"orientacoes",defaultValue:null!==(e=null==N?void 0:N.obs)&&void 0!==e?e:"",...X("orientacoes")})})})})})]})})},A=()=>{var e,t;let{user:a,loggedUnity:n}=(0,i.useContext)(S.V),[p,v]=(0,i.useState)(),[k,P]=(0,i.useState)(),[V,q]=(0,i.useState)(null),[W,M]=(0,i.useState)([]),[R,N]=(0,i.useState)(null),[w,E]=(0,i.useState)(!1),[_,z]=(0,i.useState)(!1),A=c(),H=(0,I.g_)(A.pathname),{setTitle:$}=(0,i.useContext)(y.f),{setValue:L,register:T,handleSubmit:U,formState:{errors:X}}=(0,s.cI)(),G=e=>{e.blocks.map((e,t)=>{e.itens.map((e,a)=>{e&&(L("blocks.[".concat(t,"].itens.[").concat(a,"].item"),e.item),L("blocks.[".concat(t,"].itens.[").concat(a,"].alternativa"),e.alternativa))})})},J=async e=>{let t={unidadeID:n.unidadeID,header:e.headers,products:e.products,blocks:e.blocks,orientacoes:e.orientacoes};console.log("onSubmit: ",t);try{await D.h.put("".concat(H,"/recebimentoMp/updateData"),t).then(e=>{F.ZP.success(I.OD.successUpdate),E(!w)})}catch(a){console.log(a)}},K=e=>{let t=[...W];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),M(t)},Q=()=>{let e=[...W];e.push({dados:{ordem:e.length+1,nome:"",status:1},itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),M(e)},Y=()=>{try{z(!0),D.h.post("".concat(H,"/recebimentoMp/getData"),{unidadeID:n.unidadeID}).then(e=>{console.log("getData: ",e.data),v(e.data.header),P(e.data.products),M(e.data.blocks),N(e.data.orientacoes.obs),q(e.data.options),G(e.data),z(!1)})}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{console.log("no useEffect savingForm"),$("Formul\xe1rio do Recebimento de MP"),Y()},[w]),console.log("errors: ",X),(0,o.jsx)(o.Fragment,{children:_?(0,o.jsx)(B.Z,{}):(0,o.jsxs)("form",{onSubmit:U(J),children:[p&&(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(C.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>U(J)}),(0,o.jsx)(r.Z,{children:(0,o.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,o.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(m.ZP,{item:!0,md:4,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),p.map((e,t)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"headers.[".concat(t,"].parRecebimentompID"),defaultValue:e.parRecebimentompID,...T("headers.[".concat(t,"].parRecebimentompID"))}),(0,o.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"headers.[".concat(t,"].mostra"),...T("headers.[".concat(t,"].mostra")),defaultChecked:1==p[t].mostra})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"headers.[".concat(t,"].obrigatorio"),...T("headers.[".concat(t,"].obrigatorio")),defaultChecked:1==p[t].obrigatorio})})]})},t)}))]})})})]}),k&&(0,o.jsx)(l.Z,{sx:{mt:4},children:(0,o.jsx)(r.Z,{children:(0,o.jsx)(d.Z,{component:"nav","aria-label":"main mailbox",children:(0,o.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(m.ZP,{item:!0,md:4,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})})]})}),k.map((e,t)=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.ZP,{divider:!0,disablePadding:!0,children:(0,o.jsxs)(x.Z,{children:[(0,o.jsx)("input",{type:"hidden",name:"products.[".concat(t,"].parRecebimentoMpProdutoID"),defaultValue:e.parRecebimentompProdutoID,...T("products.[".concat(t,"].parRecebimentoMpProdutoID"))}),(0,o.jsx)(m.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"products.[".concat(t,"].mostra"),...T("products.[".concat(t,"].mostra")),defaultChecked:1==k[t].mostra})}),(0,o.jsx)(m.ZP,{item:!0,md:3,children:(0,o.jsx)(b.Z,{name:"products.[".concat(t,"].obrigatorio"),...T("products.[".concat(t,"].obrigatorio")),defaultChecked:1==k[t].obrigatorio})})]})},t)}))]})})})}),W&&W.map((a,n)=>{var c,i,s,d;return(0,o.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:4},children:"Bloco ".concat(n+1)}),(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(n,"].parRecebimentompBlocoID"),defaultValue:a.dados.parRecebimentompBlocoID,...T("blocks.[".concat(n,"].parRecebimentompBlocoID"))}),(0,o.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,o.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,o.jsx)(j.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(n,"].sequencia"),defaultValue:a.dados.ordem,...T("blocks.[".concat(n,"].sequencia"),{required:!0}),error:null!=X&&null!==(c=X.blocks)&&void 0!==c&&null!==(i=c[n])&&void 0!==i&&!!i.sequencia})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:8,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(j.Z,{label:"Nome do Bloco",placeholder:"Nome do Bloco",name:"blocks.[".concat(n,"].nome"),defaultValue:a.dados.nome,...T("blocks.[".concat(n,"].nome"),{required:!0}),error:null!=X&&null!==(s=X.blocks)&&void 0!==s&&null!==(d=s[n])&&void 0!==d&&!!d.nome})})}),(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:"Ativo"}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(n,"].status"),...T("blocks.[".concat(n,"].status")),defaultChecked:1==W[n].dados.status})]}),(0,o.jsxs)(m.ZP,{item:!0,xs:12,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:"Observa\xe7\xe3o"}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(n,"].obs"),...T("blocks.[".concat(n,"].obs")),defaultChecked:1==W[n].dados.obs})]})]}),(0,o.jsxs)(m.ZP,{container:!0,spacing:4,sx:{mt:0},children:[(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Itens"})}),a.itens&&a.itens.map((a,c)=>{var i,s,l,r;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{type:"hidden",name:"blocks.[".concat(n,"].itens.[").concat(c,"].parRecebimentompBlocoItemID"),defaultValue:a.parRecebimentompBlocoItemID,...T("blocks.[".concat(n,"].itens.[").concat(c,"].parRecebimentompBlocoItemID"))}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:1,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(j.Z,{label:"Sequ\xeancia",placeholder:"Sequ\xeancia",name:"blocks.[".concat(n,"].itens.[").concat(c,"].sequencia"),disabled:0==a.status,defaultValue:a.ordem,...T("blocks.[".concat(n,"].itens.[").concat(c,"].sequencia"),{required:!0}),error:null!=X&&null!==(i=X.blocks)&&void 0!==i&&null!==(s=i[n])&&void 0!==s&&null!==(l=s.itens)&&void 0!==l&&null!==(r=l[c])&&void 0!==r&&!!r.sequencia})})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(f.Z,{options:V.itens,getOptionLabel:e=>e.nome||"",disabled:0==a.status,defaultValue:null!==(e=W[n].itens[c].item)&&void 0!==e?e:{nome:""},name:"blocks.[".concat(n,"].itens.[").concat(c,"].item"),...T("blocks.[".concat(n,"].itens.[").concat(c,"].item"),{required:!0}),onChange(e,t){L("blocks.[".concat(n,"].itens.[").concat(c,"].item"),null!=t?t:null)},renderInput(e){var t,i,s;return(0,o.jsx)(j.Z,{...e,label:a.itemID>0?"Item [".concat(a.itemID,"]"):"Item",placeholder:a.itemID>0?"Item [".concat(a.itemID,"]"):"Item",error:null===(s=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(i=t[n])||void 0===i?void 0:i.itens[c])||void 0===s?void 0:s.item})}})})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:2,children:(0,o.jsx)(Z.Z,{fullWidth:!0,children:(0,o.jsx)(f.Z,{options:V.alternativas,getOptionLabel:e=>e.nome||"",disabled:0==a.status,defaultValue:null!==(t=W[n].itens[c].alternativa)&&void 0!==t?t:{nome:""},name:"blocks.[".concat(n,"].itens.[").concat(c,"].alternativa"),...T("blocks.[".concat(n,"].itens.[").concat(c,"].alternativa"),{required:!0}),onChange(e,t){L("blocks.[".concat(n,"].itens.[").concat(c,"].alternativa"),null!=t?t:null)},renderInput(e){var t,a,i;return(0,o.jsx)(j.Z,{...e,label:"Alternativa",placeholder:"Alternativa",error:null===(i=null==X?void 0:null===(t=X.blocks)||void 0===t?void 0:null===(a=t[n])||void 0===a?void 0:a.itens[c])||void 0===i?void 0:i.alternativa})}})})}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==c?"Ativo":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(n,"][").concat(c,"].status"),...T("blocks.[".concat(n,"].itens.[").concat(c,"].status")),defaultChecked:1==a.status})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==c?"Obs":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(n,"][").concat(c,"].obs"),disabled:0==a.status,...T("blocks.[".concat(n,"].itens.[").concat(c,"].obs")),defaultChecked:1==a.obs})]}),(0,o.jsxs)(m.ZP,{item:!0,md:1,children:[(0,o.jsx)(h.Z,{variant:"body2",children:0==c?"Obrigat\xf3rio":""}),(0,o.jsx)(b.Z,{name:"blocks.[".concat(n,"][").concat(c,"].obrigatorio"),disabled:0==a.status,...T("blocks.[".concat(n,"].itens.[").concat(c,"].obrigatorio")),defaultChecked:1==a.obrigatorio})]})]})}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,o.jsx)(O.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){K(n)},children:"Inserir Item"})})]})]})},n)}),(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,o.jsx)(g.Z,{variant:"outlined",color:"primary",startIcon:(0,o.jsx)(O.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){Q()},children:"Inserir Bloco"})}),p&&(0,o.jsx)(l.Z,{md:12,sx:{mt:4},children:(0,o.jsx)(r.Z,{children:(0,o.jsx)(m.ZP,{container:!0,spacing:4,children:(0,o.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,o.jsx)(j.Z,{label:"Orienta\xe7\xf5es",placeholder:"Orienta\xe7\xf5es",defaultValue:null!=R?R:"",name:"orientacoes",...T("orientacoes"),rows:4,multiline:!0,fullWidth:!0})})})})})]})})},H=()=>{let e=c().query.id;return(0,o.jsxs)(o.Fragment,{children:[1==e&&(0,o.jsx)(z,{}),2==e&&(0,o.jsx)(A,{}),!e&&(0,o.jsx)("div",{children:"Formul\xe1rio n\xe3o encontrado"})]})};var $=H}},function(e){e.O(0,[4885,6668,8214,7536,5537,9774,2888,179],function(){return e(e.s=64876)}),_N_E=e.O()}]);